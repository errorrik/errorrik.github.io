<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>ER (Enterprise RIA) &#26694;&#26550;&#25163;&#20876;</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="book" title="ER (Enterprise RIA) &#26694;&#26550;&#25163;&#20876;"><div class="titlepage"><div><div><h1 class="title"><a name="idm105203793040"></a>ER (Enterprise RIA) &#26694;&#26550;&#25163;&#20876;</h1></div><div><div class="author"><h3 class="author"><span class="firstname">erik<code class="email">&lt;<a class="email" href="mailto:dongrui@baidu.com">dongrui@baidu.com</a>&gt;</code></span></h3></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#idm105203785744">1. ER (Enterprise RIA)</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203782480">1.1. &#20160;&#20040;&#26159;ER&#26694;&#26550;&#65311;</a></span></dt><dt><span class="section"><a href="#idm105203796464">1.2. ER&#26694;&#26550;&#30340;&#36866;&#29992;&#20110;&#20160;&#20040;&#39033;&#30446;&#65311;</a></span></dt><dt><span class="section"><a href="#idm105203779104">1.3. ER&#26694;&#26550;&#35299;&#20915;&#20102;&#20160;&#20040;&#38382;&#39064;&#65311;</a></span></dt><dt><span class="section"><a href="#idm105203774544">1.4. &#24320;&#22987;&#20043;&#21069;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idm105203770288">2. &#24320;&#22987;&#65306;Hello world&#65281;</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203768976">2.1. &#31532;&#19968;&#27493;&#65306;&#24314;&#31435;html</a></span></dt><dt><span class="section"><a href="#idm105203765984">2.2. &#31532;&#20108;&#27493;&#65306;&#32534;&#20889;&#39029;&#38754;&#26694;&#26550;</a></span></dt><dt><span class="section"><a href="#idm105203764112">2.3. &#31532;&#19977;&#27493;&#65306;&#32534;&#20889;Module&#21644;Action</a></span></dt><dt><span class="section"><a href="#idm105203760112">2.4. &#31532;&#22235;&#27493;&#65306;&#24314;&#31435;&#35270;&#22270;&#27169;&#26495;&#25991;&#20214;</a></span></dt><dt><span class="section"><a href="#idm105203757136">2.5. &#31532;&#20116;&#27493;&#65306;&#37197;&#32622;&#24182;&#23436;&#25104;</a></span></dt><dt><span class="section"><a href="#idm105203755488">2.6. &#24635;&#32467;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idm105203748912">3. &#20837;&#38376;&#31687;&#65306;&#20351;&#29992;ER&#26694;&#26550;</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203747856">3.1. MVC</a></span></dt><dt><span class="section"><a href="#idm105203744272">3.2. &#21551;&#21160;ER&#26694;&#26550;</a></span></dt><dt><span class="section"><a href="#idm105203742112">3.3. location</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203741376">3.3.1. &#26684;&#24335;&#23450;&#20041;</a></span></dt><dt><span class="section"><a href="#idm105203738368">3.3.2. &#21382;&#21490;&#35760;&#24405;&#19982;URL&#25935;&#24863;&#21407;&#29702;</a></span></dt><dt><span class="section"><a href="#idm105203738112">3.3.3. er.locator API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203726064">3.4. controller</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203725040">3.4.1. controller&#30340;&#36816;&#34892;&#26426;&#21046;</a></span></dt><dt><span class="section"><a href="#idm105203722032">3.4.2. er.controller API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203709216">3.5. Model</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203708192">3.5.1. Model&#22768;&#26126;</a></span></dt><dt><span class="section"><a href="#idm105203705264">3.5.2. er.Model API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203670256">3.6. &#27169;&#26495;</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203668816">3.6.1. &#27169;&#26495;&#21152;&#36733;</a></span></dt><dt><span class="section"><a href="#idm105203666224">3.6.2. &#27169;&#26495;&#35268;&#21017;</a></span></dt><dt><span class="section"><a href="#idm105203665968">3.6.3. er.template API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203645360">3.7. View</a></span></dt><dt><span class="section"><a href="#idm105203642368">3.8. Module</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203637248">3.8.1. er.Module API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203635040">3.9. Action</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203629216">3.9.1. &#21019;&#24314;Action</a></span></dt><dt><span class="section"><a href="#idm105203623584">3.9.2. &#37197;&#32622;Action</a></span></dt><dt><span class="section"><a href="#idm105203620160">3.9.3. Action&#30340;enter</a></span></dt><dt><span class="section"><a href="#idm105203618064">3.9.4. &#34892;&#20026;&#21021;&#22987;&#21270;</a></span></dt><dt><span class="section"><a href="#idm105203614528">3.9.5. &#33258;&#21160;&#21152;&#36733;</a></span></dt><dt><span class="section"><a href="#idm105203608880">3.9.6. Action&#30340;event</a></span></dt><dt><span class="section"><a href="#idm105203606320">3.9.7. er.Action API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203582608">3.10. &#26435;&#38480;&#25511;&#21046;&#19982;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#idm105203577200">3.11. &#20351;&#29992;ESUI</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203576400">3.11.1. ESUI&#31616;&#20171;</a></span></dt><dt><span class="section"><a href="#idm105203574896">3.11.2. &#27169;&#26495;&#20013;&#30340;&#23450;&#20041;&#35821;&#27861;</a></span></dt><dt><span class="section"><a href="#idm105203569184">3.11.3. &#22312;view&#20013;&#23450;&#20041;&#25511;&#20214;&#23646;&#24615;</a></span></dt><dt><span class="section"><a href="#idm105203565744">3.11.4. &#32473;&#25511;&#20214;&#32465;&#23450;&#20107;&#20214;</a></span></dt><dt><span class="section"><a href="#idm105203562064">3.11.5. Model&#21464;&#26356;&#30340;&#23454;&#26102;&#35270;&#22270;&#21047;&#26032;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203559664">3.12. ER&#26694;&#26550;&#24037;&#20316;&#27969;&#31243;</a></span></dt><dt><span class="section"><a href="#idm105203556784">3.13. &#24320;&#21457;&#35268;&#33539;</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203555392">3.13.1. &#20351;&#29992;&#29256;&#26412;&#31649;&#29702;&#24037;&#20855;</a></span></dt><dt><span class="section"><a href="#idm105203554048">3.13.2. web&#26681;&#30446;&#24405;&#25991;&#20214;&#22841;&#32467;&#26500;</a></span></dt><dt><span class="section"><a href="#idm105203552080">3.13.3. &#21253;&#21010;&#20998;&#19982;&#21629;&#21517;</a></span></dt><dt><span class="section"><a href="#idm105203549664">3.13.4. src&#30446;&#24405;&#25991;&#20214;&#22841;&#32467;&#26500;</a></span></dt><dt><span class="section"><a href="#idm105203540704">3.13.5. &#24320;&#21457;&#26102;&#30340;&#31649;&#29702;</a></span></dt><dt><span class="section"><a href="#idm105203528944">3.13.6. &#25171;&#21253;&#19982;&#21387;&#32553;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#idm105203748688">4. &#36827;&#38454;&#31687;&#65306;&#25193;&#23637;ER&#26694;&#26550;</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203526192">4.1. Action&#25193;&#23637;</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203525008">4.1.1. &#36890;&#36807;extend&#25193;&#23637;Action</a></span></dt><dt><span class="section"><a href="#idm105203522560">4.1.2. &#36890;&#36807;&#32487;&#25215;&#25193;&#23637;Action</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203520496">4.2. View&#25193;&#23637;</a></span></dt><dt><span class="section"><a href="#idm105203518752">4.3. &#33258;&#23450;&#20041;route&#35268;&#21017;</a></span></dt></dl></dd></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>3.1. <a href="#idm105203733712">er.locator&#38745;&#24577;&#26041;&#27861;</a></dt><dt>3.2. <a href="#idm105203721280">er.controller&#38745;&#24577;&#26041;&#27861;</a></dt><dt>3.3. <a href="#idm105203704464">er.Model&#21021;&#22987;&#21270;&#21442;&#25968;</a></dt><dt>3.4. <a href="#idm105203703008">er.Model&#23454;&#20363;&#26041;&#27861;</a></dt><dt>3.5. <a href="#idm105203691664">er.Model&#21021;&#22987;&#21270;&#21442;&#25968;</a></dt><dt>3.6. <a href="#idm105203690208">er.Model&#21021;&#22987;&#21270;&#21442;&#25968; (&#38750;object&#24418;&#24335;)</a></dt><dt>3.7. <a href="#idm105203685728">er.Model.Loader&#23454;&#20363;&#26041;&#27861;</a></dt><dt>3.8. <a href="#idm105203654032">er.locator&#38745;&#24577;&#26041;&#27861;</a></dt><dt>3.9. <a href="#idm105203636576">er.Module&#21021;&#22987;&#21270;&#21442;&#25968;</a></dt><dt>3.10. <a href="#idm105203605680">er.Action&#21021;&#22987;&#21270; - option&#21442;&#25968;</a></dt><dt>3.11. <a href="#idm105203594016">er.Action &#23454;&#20363;&#26041;&#27861;</a></dt></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>3.1. <a href="#idm105203743072">&#21551;&#21160;ER&#26694;&#26550;</a></dt><dt>3.2. <a href="#idm105203706448">er.Model:&#23454;&#20363;&#21270;</a></dt><dt>3.3. <a href="#idm105203667504">&#37197;&#32622;&#27169;&#26495;&#25991;&#20214;</a></dt><dt>3.4. <a href="#idm105203664736">&#31616;&#21333;&#27169;&#26495;</a></dt><dt>3.5. <a href="#idm105203663136">&#21464;&#37327;&#26367;&#25442;&#36807;&#28388;&#22120;</a></dt><dt>3.6. <a href="#idm105203661440">&#36890;&#36807;import&#36827;&#34892;&#27169;&#26495;&#22797;&#29992;</a></dt><dt>3.7. <a href="#idm105203659616">&#36890;&#36807;master&#36827;&#34892;&#27169;&#26495;&#22797;&#29992;</a></dt><dt>3.8. <a href="#idm105203657408">&#27169;&#26495;&#20013;&#30340;&#36923;&#36753;&#20998;&#25903;</a></dt><dt>3.9. <a href="#idm105203655760">&#27169;&#26495;&#20013;&#30340;&#24490;&#29615;</a></dt><dt>3.10. <a href="#idm105203643488">er.View: &#21019;&#24314;View&#23454;&#20363;</a></dt><dt>3.11. <a href="#idm105203640416">er.Module: &#22768;&#26126;&#19994;&#21153;&#27169;&#22359;</a></dt><dt>3.12. <a href="#idm105203627840">er.Action: &#22768;&#26126;Action</a></dt><dt>3.13. <a href="#idm105203622304">&#37197;&#32622;Action</a></dt><dt>3.14. <a href="#idm105203607744">Action&#30340;&#20107;&#20214;</a></dt><dt>3.15. <a href="#idm105203572352">&#27169;&#26495;&#20013;&#22768;&#26126;UI&#32452;&#20214;</a></dt><dt>3.16. <a href="#idm105203567744">&#22312;view&#20013;&#23450;&#20041;&#25511;&#20214;&#23646;&#24615;</a></dt><dt>3.17. <a href="#idm105203564368">&#32473;&#25511;&#20214;&#32465;&#23450;&#20107;&#20214;</a></dt><dt>3.18. <a href="#idm105203560816">Model&#21464;&#26356;&#30340;&#23454;&#26102;&#35270;&#22270;&#21047;&#26032;</a></dt><dt>4.1. <a href="#idm105203516096">&#33258;&#23450;&#20041;route&#35268;&#21017;</a></dt></dl></div><div class="chapter" title="Chapter 1. ER (Enterprise RIA)"><div class="titlepage"><div><div><h2 class="title"><a name="idm105203785744"></a>Chapter 1. ER (Enterprise RIA)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idm105203782480">1.1. &#20160;&#20040;&#26159;ER&#26694;&#26550;&#65311;</a></span></dt><dt><span class="section"><a href="#idm105203796464">1.2. ER&#26694;&#26550;&#30340;&#36866;&#29992;&#20110;&#20160;&#20040;&#39033;&#30446;&#65311;</a></span></dt><dt><span class="section"><a href="#idm105203779104">1.3. ER&#26694;&#26550;&#35299;&#20915;&#20102;&#20160;&#20040;&#38382;&#39064;&#65311;</a></span></dt><dt><span class="section"><a href="#idm105203774544">1.4. &#24320;&#22987;&#20043;&#21069;</a></span></dt></dl></div><div class="section" title="1.1. &#20160;&#20040;&#26159;ER&#26694;&#26550;&#65311;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203782480"></a>1.1. &#20160;&#20040;&#26159;ER&#26694;&#26550;&#65311;</h2></div></div></div><p>ER&#26159;&#19968;&#22871;&#29992;&#20110;&#25903;&#25745;&#23500;&#23458;&#25143;&#31471;&#24212;&#29992;&#30340;&#26694;&#26550;&#12290;&#22905;&#23454;&#29616;&#20102;&#21069;&#36827;&#21518;&#36864;&#30340;&#21382;&#21490;&#31649;&#29702;&#12289;Hash&#23450;&#20301;&#22120;&#12289;path&#19982;action&#30340;&#26144;&#23556;&#12289;&#36816;&#34892;&#26102;&#30340;&#25968;&#25454;&#31649;&#29702;&#23481;&#22120;&#12289;&#31616;&#26131;&#30340;html&#27169;&#26495;&#12289;&#29366;&#24577;&#20445;&#25345;&#12289;&#26435;&#38480;&#31649;&#29702;&#31561;&#21151;&#33021;&#12290;&#36890;&#36807;er&#26694;&#26550;&#21487;&#20197;&#24456;&#26041;&#20415;&#22320;&#26500;&#24314;&#19968;&#20010;AJAX&#24212;&#29992;&#12290;</p></div><div class="section" title="1.2. ER&#26694;&#26550;&#30340;&#36866;&#29992;&#20110;&#20160;&#20040;&#39033;&#30446;&#65311;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203796464"></a>1.2. ER&#26694;&#26550;&#30340;&#36866;&#29992;&#20110;&#20160;&#20040;&#39033;&#30446;&#65311;</h2></div></div></div><p>ER&#26694;&#26550;&#20165;&#36866;&#29992;&#20110;&#25972;&#31449;&#24335;Ajax&#24212;&#29992;&#12290;</p><p>&#23545;&#20110;&#19968;&#20123;&#19987;&#23646;&#39046;&#22495;&#31995;&#32479;&#65288;&#22914;OA/ERP/CRM&#31561;&#65289;&#65292;&#20351;&#29992;ajax&#25216;&#26415;&#26500;&#24314;&#32593;&#31449;&#33021;&#22815;&#24102;&#26469;&#36739;&#22909;&#30340;&#29992;&#25143;&#20307;&#39564;&#65292;&#25552;&#21319;&#31995;&#32479;&#30456;&#24212;&#36895;&#24230;&#65292;&#20943;&#23569;&#20887;&#20313;&#25968;&#25454;&#20256;&#36755;&#38477;&#20302;&#24102;&#23485;&#28040;&#32791;&#12290;</p><div class="tip" title="Tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>&#25972;&#31449;&#24335;Ajax&#24212;&#29992;&#19981;&#21033;&#20110;&#25628;&#32034;&#24341;&#25806;&#25235;&#21462;&#12290;&#25925;ER&#26694;&#26550;&#19981;&#36866;&#29992;&#20110;&#20869;&#23481;&#25552;&#20379;&#30340;WEB&#31449;&#28857;&#12290;</p></div></div><div class="section" title="1.3. ER&#26694;&#26550;&#35299;&#20915;&#20102;&#20160;&#20040;&#38382;&#39064;&#65311;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203779104"></a>1.3. ER&#26694;&#26550;&#35299;&#20915;&#20102;&#20160;&#20040;&#38382;&#39064;&#65311;</h2></div></div></div><p>&#34429;&#28982;&#20247;&#25152;&#21608;&#30693;Ajax&#25216;&#26415;&#32473;Web&#30340;&#20307;&#39564;&#24102;&#26469;&#20102;&#26032;&#30340;&#27169;&#24335;&#65292;&#20294;&#26159;&#24320;&#21457;&#19982;&#32500;&#25252;&#25104;&#26412;&#30340;&#22686;&#21152;&#26159;&#27604;&#36739;&#40635;&#28902;&#30340;&#12290;ER&#26694;&#26550;&#20027;&#35201;&#35299;&#20915;&#20102;&#22914;&#19979;&#26680;&#24515;&#38382;&#39064;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#23553;&#35013;&#20102;hash&#21464;&#26356;&#39029;&#38754;&#19981;&#21047;&#26032;&#30340;&#29305;&#24615;&#65292;&#25903;&#25345;&#21069;&#36827;&#21518;&#36864;&#21382;&#21490;&#35760;&#24405;&#22534;&#26632;&#19982;URL&#25935;&#24863;&#12290;</p></li><li class="listitem"><p>&#33258;&#21160;&#23436;&#25104;location&#21040;Javascript Function&#30340;&#26144;&#23556;&#65292;&#24320;&#21457;&#32773;&#21482;&#38656;&#35201;&#20851;&#24515;&#20855;&#20307;&#30340;&#36923;&#36753;&#22788;&#29702;&#12290;</p></li><li class="listitem"><p>&#22312;&#26694;&#26550;&#30340;&#19994;&#21153;&#25903;&#25345;&#23618;&#38754;&#23454;&#29616;&#20102;MVC&#23553;&#35013;&#65292;&#20415;&#20110;&#20195;&#30721;&#20998;&#31163;&#19982;&#22810;&#20154;&#21327;&#21516;&#24320;&#21457;&#12290;</p></li><li class="listitem"><p>&#36890;&#36807;ESUI&#32452;&#20214;&#24211;&#65292;&#25552;&#20379;&#23545;&#22797;&#26434;&#20132;&#20114;&#30340;&#25903;&#25345;&#12290;</p></li></ol></div></div><div class="section" title="1.4. &#24320;&#22987;&#20043;&#21069;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203774544"></a>1.4. &#24320;&#22987;&#20043;&#21069;</h2></div></div></div><p>&#34429;&#28982;ER&#26694;&#26550;&#24456;&#22823;&#31243;&#24230;&#38477;&#20302;&#20102;&#24320;&#21457;&#30340;&#22797;&#26434;&#24230;&#65292;&#20294;&#26159;&#24320;&#22987;&#20351;&#29992;ER&#26694;&#26550;&#20043;&#21069;&#65292;&#20320;&#24212;&#35813;&#20102;&#35299;&#19968;&#20123;&#22522;&#30784;&#30693;&#35782;&#12290;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#20102;&#35299;MVC&#27169;&#24335;&#12290;</p></li><li class="listitem"><p>&#25026;&#24471;&#20351;&#29992;HTML&#21644;CSS&#36827;&#34892;&#39029;&#38754;&#24067;&#23616;&#12290;</p></li><li class="listitem"><p>&#20102;&#35299;Javascript&#35821;&#35328;&#21644;&#22522;&#26412;&#30340;DOM&#25805;&#20316;&#12290;</p></li><li class="listitem"><p>&#20102;&#35299;JSON&#12290;</p></li><li class="listitem"><p>&#25026;&#24471;&#20351;&#29992;&#20219;&#24847;&#19968;&#20010;Web Server&#12290;&#21487;&#20197;&#26159;apache&#12289;nginx&#12289;tomcat&#12289;lighttpd&#12289;IIS&#31561;&#12290;</p></li></ol></div></div></div><div class="chapter" title="Chapter 2. &#24320;&#22987;&#65306;Hello world&#65281;"><div class="titlepage"><div><div><h2 class="title"><a name="idm105203770288"></a>Chapter 2. &#24320;&#22987;&#65306;Hello world&#65281;</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idm105203768976">2.1. &#31532;&#19968;&#27493;&#65306;&#24314;&#31435;html</a></span></dt><dt><span class="section"><a href="#idm105203765984">2.2. &#31532;&#20108;&#27493;&#65306;&#32534;&#20889;&#39029;&#38754;&#26694;&#26550;</a></span></dt><dt><span class="section"><a href="#idm105203764112">2.3. &#31532;&#19977;&#27493;&#65306;&#32534;&#20889;Module&#21644;Action</a></span></dt><dt><span class="section"><a href="#idm105203760112">2.4. &#31532;&#22235;&#27493;&#65306;&#24314;&#31435;&#35270;&#22270;&#27169;&#26495;&#25991;&#20214;</a></span></dt><dt><span class="section"><a href="#idm105203757136">2.5. &#31532;&#20116;&#27493;&#65306;&#37197;&#32622;&#24182;&#23436;&#25104;</a></span></dt><dt><span class="section"><a href="#idm105203755488">2.6. &#24635;&#32467;</a></span></dt></dl></div><p>&#26412;&#31456;&#25353;&#27493;&#39588;&#25945;&#24744;&#24314;&#31435;&#19968;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#65306;Hello world&#65281;&#20219;&#20309;&#22797;&#26434;&#30340;&#24212;&#29992;&#37117;&#20250;&#32463;&#36807;&#31867;&#20284;&#30340;&#24314;&#31435;&#36807;&#31243;&#12290;</p><div class="section" title="2.1. &#31532;&#19968;&#27493;&#65306;&#24314;&#31435;html"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203768976"></a>2.1. &#31532;&#19968;&#27493;&#65306;&#24314;&#31435;html</h2></div></div></div><p>&#26032;&#24314;&#19968;&#20010;UTF-8&#32534;&#30721;&#30340;&#25991;&#26412;&#25991;&#20214;&#65292;&#21629;&#21517;&#20026;hello.html&#12290;</p><p>&#19968;&#20010;&#23436;&#25972;&#30340;&#26631;&#20934;&#30340;html&#21253;&#21547;&#20102;DOCTYPE&#12289;html&#12289;head&#20197;&#21450;body&#37096;&#20998;&#12290;ER&#26694;&#26550;&#20381;&#36182;&#20110;tangram&#65292;&#25152;&#20197;&#24744;&#38656;&#35201;&#22312;head&#20013;&#24341;&#20837;tangram&#20197;&#21450;er&#26694;&#26550;&#30340;javascript&#25991;&#20214;&#12290;</p><p>&#36890;&#24120;&#19968;&#20010;html&#38656;&#35201;&#22312;head&#37096;&#20998;&#30340;&#39030;&#31471;&#25351;&#23450;content-type&#65292;&#23450;&#20041;&#20869;&#23481;&#31867;&#22411;&#20197;&#21450;&#23383;&#31526;&#38598;&#12290;UTF-8&#26356;&#36866;&#21512;&#20110;&#22269;&#38469;&#21270;&#12290;</p><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;hello&lt;/title&gt;
&lt;script type="text/javascript" src="http://img.baidu.com/js/tangram-1.3.9.core.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="../src/er-2.0.0.js"&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;&lt;/body&gt;
&lt;/html&gt;</pre></div><div class="section" title="2.2. &#31532;&#20108;&#27493;&#65306;&#32534;&#20889;&#39029;&#38754;&#26694;&#26550;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203765984"></a>2.2. &#31532;&#20108;&#27493;&#65306;&#32534;&#20889;&#39029;&#38754;&#26694;&#26550;</h2></div></div></div><p>&#22312;body&#20013;&#28155;&#21152;&#19968;&#20123;html&#65292;&#20351;&#39029;&#38754;&#26377;&#20869;&#23481;&#12290;ER&#26694;&#26550;&#40664;&#35748;&#20250;&#33258;&#21160;&#28210;&#26579;&#39029;&#38754;&#20013;&#30340;&#19968;&#20010;&#21306;&#22495;&#65292;&#25105;&#20204;&#25226;&#36825;&#20010;&#21306;&#22495;&#31216;&#20026;&#8220;&#20027;&#21306;&#22495;&#8221;&#12290;</p><pre class="programlisting">&lt;body&gt;
&lt;div&gt;
    &lt;a href="#/hello~name=world"&gt;default&lt;/a&gt; | &lt;a href="#/hello~name=erik"&gt;erik&lt;/a&gt; | &lt;a href="#/hello~name=er"&gt;er&lt;/a&gt;
&lt;/div&gt;
&lt;div id="Main"&gt;&lt;/div&gt;
&lt;/body&gt;</pre></div><div class="section" title="2.3. &#31532;&#19977;&#27493;&#65306;&#32534;&#20889;Module&#21644;Action"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203764112"></a>2.3. &#31532;&#19977;&#27493;&#65306;&#32534;&#20889;Module&#21644;Action</h2></div></div></div><p>&#22312;body&#26631;&#31614;&#32467;&#26463;&#20043;&#21069;&#25554;&#20837;script&#22359;&#65292;&#32534;&#20889;Module&#21644;Action&#12290;&#24744;&#26242;&#26102;&#19981;&#38656;&#35201;&#20102;&#35299;Module&#21644;Action&#30340;&#27010;&#24565;&#65292;&#21518;&#38754;&#30340;&#31456;&#33410;&#20250;&#26377;&#35814;&#32454;&#30340;&#35828;&#26126;&#12290;</p><pre class="programlisting">&lt;script&gt;
    // &#22768;&#26126;&#19994;&#21153;&#27169;&#22359;
    var hello = new er.Module( {
        config: {
            'action': [
                {
                    path: '/hello',
                    action: 'hello.action'
                }
            ]
        }
    } );
    
    hello.action = new er.Action( {
        view: 'hello'
    } );
&lt;/script&gt;</pre><p>&#21487;&#20197;&#30475;&#21040;&#65292;&#25105;&#20204;&#24178;&#20102;&#20004;&#20214;&#20107;&#24773;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#22312;Module&#30340;&#22768;&#26126;&#20013;&#37197;&#32622;&#20102;Action&#65292;&#20351;&#24471;location&#20026;/hello&#26102;&#33258;&#21160;&#26144;&#23556;&#21040;Action&#23545;&#35937;hello.action&#36827;&#34892;&#22788;&#29702;&#12290;</p></li><li class="listitem"><p>&#22312;Action&#20013;&#22768;&#26126;&#20102;&#20351;&#29992;&#30340;&#35270;&#22270;&#8220;view&#8221;&#12290;</p></li></ol></div></div><div class="section" title="2.4. &#31532;&#22235;&#27493;&#65306;&#24314;&#31435;&#35270;&#22270;&#27169;&#26495;&#25991;&#20214;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203760112"></a>2.4. &#31532;&#22235;&#27493;&#65306;&#24314;&#31435;&#35270;&#22270;&#27169;&#26495;&#25991;&#20214;</h2></div></div></div><p>&#26032;&#24314;&#19968;&#20010;UTF-8&#32534;&#30721;&#30340;&#25991;&#26412;&#25991;&#20214;&#65292;&#21629;&#21517;&#20026;tpl.html&#12290;&#35813;html&#19981;&#38656;&#35201;&#36981;&#24490;&#26631;&#20934;html&#65292;&#21482;&#38656;&#35201;&#22635;&#20837;&#22914;&#19979;&#20869;&#23481;&#65306;</p><pre class="programlisting">&lt;!-- target:hello --&gt;
hello ${name}</pre><p>&#8220;&lt;!-- target:hello --&gt;&#8221;&#26159;ER&#26694;&#26550;&#40664;&#35748;&#25903;&#25345;&#30340;&#27169;&#26495;&#35821;&#27861;&#65292;&#21518;&#38754;&#30340;&#31456;&#33410;&#20250;&#26377;&#35814;&#32454;&#30340;&#35828;&#26126;&#12290;</p><p>&#22312;&#31532;&#19977;&#27493;&#21019;&#24314;&#30340;script&#22359;&#20013;&#21152;&#20837;&#22914;&#19979;&#37197;&#32622;&#65292;ER&#26694;&#26550;&#20250;&#33258;&#21160;&#21152;&#36733;&#24744;&#37197;&#32622;&#30340;&#27169;&#26495;&#25991;&#20214;&#24182;&#35299;&#26512;&#12290;</p><pre class="programlisting">er.config.TEMPLATE_LIST = ['tpl.html'];</pre></div><div class="section" title="2.5. &#31532;&#20116;&#27493;&#65306;&#37197;&#32622;&#24182;&#23436;&#25104;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203757136"></a>2.5. &#31532;&#20116;&#27493;&#65306;&#37197;&#32622;&#24182;&#23436;&#25104;</h2></div></div></div><p>&#24744;&#38656;&#35201;&#22312;&#36866;&#24403;&#30340;&#26102;&#20505;&#35753;er&#26694;&#26550;&#24320;&#22987;&#24037;&#20316;&#65292;&#22312;window.onload&#26102;&#35843;&#29992;er&#30340;init&#26041;&#27861;&#12290;</p><pre class="programlisting">
    window.onload = function () {
    er.init();
};</pre></div><div class="section" title="2.6. &#24635;&#32467;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203755488"></a>2.6. &#24635;&#32467;</h2></div></div></div><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#29992;&#20102;&#20004;&#20010;html&#25991;&#20214;&#65292;&#24635;&#20849;&#19981;&#21040;50&#34892;&#30340;&#20195;&#30721;&#65292;&#23454;&#29616;&#19968;&#20010;&#23500;&#23458;&#25143;&#31471;&#30340;&#24212;&#29992;&#12290;&#36825;&#20010;&#24212;&#29992;&#25903;&#25345;&#21069;&#36827;&#21518;&#36864;&#30340;&#21151;&#33021;&#65292;&#24182;&#19988;&#19981;&#38656;&#35201;&#20851;&#24515;&#20869;&#23481;&#30340;&#32472;&#21046;&#36807;&#31243;&#12290;</p><p>hello.html</p><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;hello&lt;/title&gt;
&lt;script type="text/javascript" src="http://img.baidu.com/js/tangram-1.3.9.core.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="../src/er-2.0.0.js"&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;div&gt;
    &lt;a href="#/hello~name=world"&gt;default&lt;/a&gt; | &lt;a href="#/hello~name=erik"&gt;erik&lt;/a&gt; | &lt;a href="#/hello~name=er"&gt;er&lt;/a&gt;
&lt;/div&gt;
&lt;div id="Main"&gt;&lt;/div&gt;
&lt;script&gt;
    // &#22768;&#26126;&#19994;&#21153;&#27169;&#22359;
    var hello = new er.Module( {
        config: {
            'action': [
                {
                    path: '/hello',
                    action: 'hello.action'
                }
            ]
        }
    } );
    
    hello.action = new er.Action( {
        view: 'hello'
    } );

    er.config.TEMPLATE_LIST = ['tpl.html'];
    window.onload = function () {
        er.init();
    };
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre><p>tpl.html</p><pre class="programlisting">&lt;!-- target:hello --&gt;
hello ${name}</pre><p>&#25105;&#20204;&#32463;&#36807;&#20102;5&#20010;&#27493;&#39588;&#21019;&#24314;&#20102;&#36825;&#20010;&#24212;&#29992;&#12290;&#36825;&#20010;&#36807;&#31243;&#30475;&#26469;&#24456;&#22810;&#65292;&#20294;&#26159;&#22312;&#23454;&#38469;&#24320;&#21457;&#20013;&#65292;&#31532;&#19968;&#12289;&#31532;&#20108;&#12289;&#31532;&#20116;&#27493;&#12289;&#20197;&#21450;&#21019;&#24314;Module&#31561;&#27493;&#39588;&#37117;&#26159;&#21487;&#20197;&#30465;&#30053;&#30340;&#12290;&#36890;&#24120;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;&#21151;&#33021;&#30028;&#38754;&#21333;&#20803;&#65292;&#21482;&#35201;&#32463;&#36807;&#24456;&#26041;&#20415;&#30340;&#20004;&#21040;&#19977;&#27493;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#21019;&#24314;Action&#12290;</p></li><li class="listitem"><p>&#22312;Module&#20013;&#37197;&#32622;&#36825;&#20010;Action&#12290;</p></li><li class="listitem"><p>&#22914;&#26524;&#27809;&#26377;&#21487;&#20197;&#22797;&#29992;&#30340;&#27169;&#26495;&#35270;&#22270;&#65292;&#21017;&#21019;&#24314;&#19968;&#20010;&#27169;&#26495;&#12290;&#65288;&#21487;&#30465;&#30053;&#30340;&#27493;&#39588;&#65289;</p></li></ol></div></div></div><div class="chapter" title="Chapter 3. &#20837;&#38376;&#31687;&#65306;&#20351;&#29992;ER&#26694;&#26550;"><div class="titlepage"><div><div><h2 class="title"><a name="idm105203748912"></a>Chapter 3. &#20837;&#38376;&#31687;&#65306;&#20351;&#29992;ER&#26694;&#26550;</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idm105203747856">3.1. MVC</a></span></dt><dt><span class="section"><a href="#idm105203744272">3.2. &#21551;&#21160;ER&#26694;&#26550;</a></span></dt><dt><span class="section"><a href="#idm105203742112">3.3. location</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203741376">3.3.1. &#26684;&#24335;&#23450;&#20041;</a></span></dt><dt><span class="section"><a href="#idm105203738368">3.3.2. &#21382;&#21490;&#35760;&#24405;&#19982;URL&#25935;&#24863;&#21407;&#29702;</a></span></dt><dt><span class="section"><a href="#idm105203738112">3.3.3. er.locator API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203726064">3.4. controller</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203725040">3.4.1. controller&#30340;&#36816;&#34892;&#26426;&#21046;</a></span></dt><dt><span class="section"><a href="#idm105203722032">3.4.2. er.controller API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203709216">3.5. Model</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203708192">3.5.1. Model&#22768;&#26126;</a></span></dt><dt><span class="section"><a href="#idm105203705264">3.5.2. er.Model API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203670256">3.6. &#27169;&#26495;</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203668816">3.6.1. &#27169;&#26495;&#21152;&#36733;</a></span></dt><dt><span class="section"><a href="#idm105203666224">3.6.2. &#27169;&#26495;&#35268;&#21017;</a></span></dt><dt><span class="section"><a href="#idm105203665968">3.6.3. er.template API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203645360">3.7. View</a></span></dt><dt><span class="section"><a href="#idm105203642368">3.8. Module</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203637248">3.8.1. er.Module API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203635040">3.9. Action</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203629216">3.9.1. &#21019;&#24314;Action</a></span></dt><dt><span class="section"><a href="#idm105203623584">3.9.2. &#37197;&#32622;Action</a></span></dt><dt><span class="section"><a href="#idm105203620160">3.9.3. Action&#30340;enter</a></span></dt><dt><span class="section"><a href="#idm105203618064">3.9.4. &#34892;&#20026;&#21021;&#22987;&#21270;</a></span></dt><dt><span class="section"><a href="#idm105203614528">3.9.5. &#33258;&#21160;&#21152;&#36733;</a></span></dt><dt><span class="section"><a href="#idm105203608880">3.9.6. Action&#30340;event</a></span></dt><dt><span class="section"><a href="#idm105203606320">3.9.7. er.Action API&#21442;&#32771;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203582608">3.10. &#26435;&#38480;&#25511;&#21046;&#19982;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#idm105203577200">3.11. &#20351;&#29992;ESUI</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203576400">3.11.1. ESUI&#31616;&#20171;</a></span></dt><dt><span class="section"><a href="#idm105203574896">3.11.2. &#27169;&#26495;&#20013;&#30340;&#23450;&#20041;&#35821;&#27861;</a></span></dt><dt><span class="section"><a href="#idm105203569184">3.11.3. &#22312;view&#20013;&#23450;&#20041;&#25511;&#20214;&#23646;&#24615;</a></span></dt><dt><span class="section"><a href="#idm105203565744">3.11.4. &#32473;&#25511;&#20214;&#32465;&#23450;&#20107;&#20214;</a></span></dt><dt><span class="section"><a href="#idm105203562064">3.11.5. Model&#21464;&#26356;&#30340;&#23454;&#26102;&#35270;&#22270;&#21047;&#26032;</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203559664">3.12. ER&#26694;&#26550;&#24037;&#20316;&#27969;&#31243;</a></span></dt><dt><span class="section"><a href="#idm105203556784">3.13. &#24320;&#21457;&#35268;&#33539;</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203555392">3.13.1. &#20351;&#29992;&#29256;&#26412;&#31649;&#29702;&#24037;&#20855;</a></span></dt><dt><span class="section"><a href="#idm105203554048">3.13.2. web&#26681;&#30446;&#24405;&#25991;&#20214;&#22841;&#32467;&#26500;</a></span></dt><dt><span class="section"><a href="#idm105203552080">3.13.3. &#21253;&#21010;&#20998;&#19982;&#21629;&#21517;</a></span></dt><dt><span class="section"><a href="#idm105203549664">3.13.4. src&#30446;&#24405;&#25991;&#20214;&#22841;&#32467;&#26500;</a></span></dt><dt><span class="section"><a href="#idm105203540704">3.13.5. &#24320;&#21457;&#26102;&#30340;&#31649;&#29702;</a></span></dt><dt><span class="section"><a href="#idm105203528944">3.13.6. &#25171;&#21253;&#19982;&#21387;&#32553;</a></span></dt></dl></dd></dl></div><div class="section" title="3.1. MVC"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203747856"></a>3.1. MVC</h2></div></div></div><p>MVC(Model - View - Controller)&#26159;&#19968;&#31181;&#32463;&#20856;&#30340;&#36719;&#20214;&#35774;&#35745;&#27169;&#24335;&#65292;&#20027;&#35201;&#30446;&#30340;&#26159;&#23558;&#25968;&#25454;&#12289;&#36923;&#36753;&#25511;&#21046;&#19982;&#35270;&#22270;&#30340;&#32844;&#36131;&#20998;&#31163;&#65292;&#35753;&#20182;&#20204;&#21508;&#33258;&#22788;&#29702;&#33258;&#24049;&#30340;&#20219;&#21153;&#12290;</p><p>ER&#26694;&#26550;&#37319;&#29992;&#20102;&#36825;&#31181;&#34987;&#24191;&#27867;&#24212;&#29992;&#22312;web&#20013;&#30340;&#27169;&#24335;&#65292;&#19979;&#38754;&#26159;ER&#26694;&#26550;&#30340;&#32467;&#26500;&#20197;&#21450;&#31616;&#21333;&#30340;workflow&#12290;</p><div><img src="er_package.jpg"></div><div><img src="er_workflow_base.jpg"></div></div><div class="section" title="3.2. &#21551;&#21160;ER&#26694;&#26550;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203744272"></a>3.2. &#21551;&#21160;ER&#26694;&#26550;</h2></div></div></div><p>&#36890;&#36807;&#35843;&#29992;er.init&#26041;&#27861;&#21487;&#20197;&#21551;&#21160;ER&#26694;&#26550;&#12290;&#36890;&#24120;&#25105;&#20204;&#22312;&#39029;&#38754;&#30340;&#24213;&#37096;&#65288;body&#26631;&#31614;&#32467;&#26463;&#20043;&#21069;&#65289;&#25110;&#32773;&#39029;&#38754;&#21152;&#36733;&#23436;&#25104;&#26102;&#65288;window.onload&#25110;&#32773;DOM&#65289;</p><div class="example"><a name="idm105203743072"></a><p class="title"><b>Example 3.1. &#21551;&#21160;ER&#26694;&#26550;</b></p><div class="example-contents"><pre class="programlisting">......html&#20869;&#23481;
    &lt;script&gt;er.init();&lt;/script&gt;
&lt;/body&gt;</pre></div></div><br class="example-break"></div><div class="section" title="3.3. location"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203742112"></a>3.3. location</h2></div></div></div><div class="section" title="3.3.1. &#26684;&#24335;&#23450;&#20041;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203741376"></a>3.3.1. &#26684;&#24335;&#23450;&#20041;</h3></div></div></div><p>ER&#26694;&#26550;&#23450;&#20041;&#20102;&#8220;#&#8221;&#21495;&#21518;&#38754;&#30340;&#20869;&#23481;&#24418;&#24335;&#65292;&#24182;&#23558;&#22905;&#31216;&#20316;&#8220;HashLocation&#8221;&#12290;&#19968;&#20010;HashLocation&#30001;path&#21644;query&#20004;&#20010;&#37096;&#20998;&#32452;&#25104;&#65292;&#20854;&#20013;query&#26159;&#21487;&#20197;&#34987;&#30465;&#30053;&#30340;&#12290;&#22905;&#21644;&#19968;&#20010;&#26222;&#36890;&#30340;url&#24456;&#20687;&#65292;&#21482;&#26159;&#23558;&#36830;&#25509;query&#30340;&#8220;?&#8221;&#21495;&#21464;&#20026;&#27874;&#28010;&#32447;&#8220;~&#8221;&#12290;&#19979;&#38754;&#26159;&#20854;&#26684;&#24335;&#23450;&#20041;&#65306;</p><pre class="programlisting">Locator = [ path ] [ ~ query ] 
path    = "/" [ *char *( "/" *char) ] 
query    = *qchar 
char    = ALPHA | DIGIT 
qchar    = char | "&amp;" | "="</pre><p>&#19978;&#38754;&#30340;&#26684;&#24335;&#23450;&#20041;&#26377;&#28857;&#25277;&#35937;&#65292;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#20855;&#20307;&#30340;HashLocation&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">/book/list~page=1&amp;pageSize=15</pre></div><div class="section" title="3.3.2. &#21382;&#21490;&#35760;&#24405;&#19982;URL&#25935;&#24863;&#21407;&#29702;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203738368"></a>3.3.2. &#21382;&#21490;&#35760;&#24405;&#19982;URL&#25935;&#24863;&#21407;&#29702;</h3></div></div></div><p>&#35775;&#38382;&#19968;&#20010;&#20256;&#32479;&#30340;&#32593;&#31449;&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#27983;&#35272;&#22120;&#30340;&#21069;&#36827;&#21518;&#36864;&#38190;&#26469;&#35775;&#38382;&#25105;&#20204;&#26366;&#35775;&#38382;&#36807;&#30340;&#21382;&#21490;&#39029;&#38754;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#22312;&#22320;&#22336;&#26639;&#36755;&#20837;&#19968;&#20010;url&#21040;&#36798;&#29305;&#23450;&#30340;&#36164;&#28304;&#39029;&#38754;&#12290;&#32780;&#23545;&#20110;&#19968;&#20010;AJAX&#30340;&#24212;&#29992;&#65292;&#30001;&#20110;&#25152;&#26377;&#30340;&#25805;&#20316;&#37117;&#22312;&#19968;&#20010;&#39029;&#38754;&#23436;&#25104;&#65292;&#21069;&#36827;&#21518;&#36864;&#25353;&#38062;&#36890;&#24120;&#26080;&#27861;&#22238;&#21040;&#20043;&#21069;&#30340;&#39029;&#38754;&#29366;&#24577;&#65292;&#32780;&#25105;&#20204;&#20063;&#27809;&#27861;&#36890;&#36807;&#36755;&#20837;url&#21040;&#36798;&#29305;&#23450;&#30340;&#22320;&#26041;&#12290;</p><p>ER&#26694;&#26550;&#23454;&#29616;&#20102;&#27983;&#35272;&#21382;&#21490;&#35760;&#24405;&#19982;url&#25935;&#24863;&#30340;&#21151;&#33021;&#65292;&#35753;&#23500;&#23458;&#25143;&#31471;&#30340;AJAX&#24212;&#29992;&#22312;&#20307;&#39564;&#19978;&#19982;&#20256;&#32479;web&#24212;&#29992;&#20445;&#25345;&#19968;&#33268;&#65292;&#36981;&#24490;&#29992;&#25143;&#30340;&#27983;&#35272;&#20064;&#24815;&#12290;</p><p>&#22312;&#27983;&#35272;&#22120;&#20013;&#65292;&#26356;&#25913;url&#8220;#&#8221;&#21495;&#21518;&#38754;&#30340;hash&#20869;&#23481;&#26102;&#65292;&#39029;&#38754;&#19981;&#20250;&#21457;&#29983;&#36339;&#36716;&#37325;&#26032;&#35831;&#27714;&#12290;ER&#26694;&#26550;&#23601;&#26159;&#21033;&#29992;&#20102;&#36825;&#28857;&#65292;&#22312;hash&#20013;&#35760;&#24405;&#21382;&#21490;&#21644;&#23454;&#29616;url&#25935;&#24863;&#12290;&#24403;&#28982;&#65292;&#26694;&#26550;&#23631;&#34109;&#20102;&#27983;&#35272;&#22120;&#20043;&#38388;&#30340;&#24046;&#24322;&#24615;&#12290;</p><div class="tip" title="Tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>&#22312;Ajax&#24212;&#29992;&#20013;&#65292;&#36339;&#36716;&#38142;&#25509;a&#26631;&#31614;&#30340;href&#23646;&#24615;&#24212;&#35813;&#20889;&#25104;&#8220;#location&#8221;&#30340;&#24418;&#24335;&#12290;&#32780;&#19988;&#25105;&#20204;&#21487;&#20197;&#21457;&#29616;&#65292;&#21363;&#20351;&#29992;&#25143;&#36873;&#25321;&#8220;&#22312;&#26032;&#31383;&#21475;&#20013;&#25171;&#24320;&#8221;&#65292;&#20381;&#28982;&#33021;&#22815;&#21040;&#36798;&#27491;&#30830;&#30340;&#20301;&#32622;&#12290;&#36825;&#23601;&#26159;url&#25935;&#24863;&#21644;&#38142;&#25509;&#30340;&#28151;&#21512;&#25928;&#24212;&#32473;&#25105;&#20204;&#24102;&#26469;&#30340;&#22909;&#22788;&#12290;</p></div></div><div class="section" title="3.3.3. er.locator API&#21442;&#32771;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203738112"></a>3.3.3. er.locator API&#21442;&#32771;</h3></div></div></div><div class="table"><a name="idm105203733712"></a><p class="title"><b>Table 3.1. er.locator&#38745;&#24577;&#26041;&#27861;</b></p><div class="table-contents"><table summary="er.locator&#38745;&#24577;&#26041;&#27861;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">&#21517;&#31216;</th><th align="left">&#25551;&#36848;</th></tr></thead><tbody><tr><td align="left">{string} getLocation( {void} )</td><td align="left">&#33719;&#21462;&#24403;&#21069;&#30340;Location</td></tr><tr><td align="left">{void} redirect( {string} loc )</td><td align="left">&#36716;&#21521;&#21040;Location</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="section" title="3.4. controller"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203726064"></a>3.4. controller</h2></div></div></div><p>controller&#20316;&#20026;&#20013;&#24515;&#25511;&#21046;&#22120;&#65292;&#25511;&#21046;&#25972;&#20307;&#30028;&#38754;&#30340;&#19994;&#21153;&#36923;&#36753;&#12290;</p><div class="section" title="3.4.1. controller&#30340;&#36816;&#34892;&#26426;&#21046;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203725040"></a>3.4.1. controller&#30340;&#36816;&#34892;&#26426;&#21046;</h3></div></div></div><p>controller&#35748;&#20026;&#65292;&#39029;&#38754;&#19978;&#24212;&#35813;&#26377;&#19968;&#20010;DOM&#20803;&#32032;&#65292;&#20316;&#20026;&#20027;&#21306;&#22495;&#12290;&#22312;location&#21457;&#29983;&#21464;&#26356;&#30340;&#26102;&#20505;&#65292;controller&#26681;&#25454;path&#26597;&#25214;&#21040;&#30456;&#24212;&#30340;Action&#65292;&#28982;&#21518;&#25191;&#34892;Action&#30340;enter&#21160;&#20316;&#12290;</p><p>&#22312;&#36825;&#20010;&#36807;&#31243;&#20013;&#65292;Action&#36127;&#36131;&#24403;&#21069;&#19994;&#21153;&#36923;&#36753;&#65292;&#25972;&#21512;&#35270;&#22270;&#19982;&#25968;&#25454;&#27169;&#22411;&#12290;</p><div class="tip" title="Tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>&#22914;&#26524;path&#26410;&#21457;&#29983;&#21464;&#21270;&#65292;controller&#23558;&#30452;&#25509;&#23545;&#24403;&#21069;&#30340;Action&#65292;&#37325;&#26032;&#25191;&#34892;enter&#21160;&#20316;&#12290;</p></div><p>controller&#21487;&#20197;&#22312;&#38750;&#20027;&#21306;&#22495;DOM&#20803;&#32032;&#19978;&#21152;&#36733;&#24182;&#25191;&#34892;Action&#30340;&#34892;&#20026;&#12290;</p></div><div class="section" title="3.4.2. er.controller API&#21442;&#32771;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203722032"></a>3.4.2. er.controller API&#21442;&#32771;</h3></div></div></div><div class="table"><a name="idm105203721280"></a><p class="title"><b>Table 3.2. er.controller&#38745;&#24577;&#26041;&#27861;</b></p><div class="table-contents"><table summary="er.controller&#38745;&#24577;&#26041;&#27861;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">&#21517;&#31216;</th><th align="left">&#25551;&#36848;</th></tr></thead><tbody><tr><td align="left">{void} fireEvent( {string}type, {Object}eventArg, {string|Object}opt_actionRuntime )</td><td align="left">fireAction&#30340;&#20107;&#20214;</td></tr><tr><td align="left">{void} fireMain( {string}type, {Object}eventArg)</td><td align="left">fire&#20027;Action&#30340;&#20107;&#20214;</td></tr><tr><td align="left">{string|Object} loadSub( {string}domId, {string}actionName, {Object}opt_argMap )</td><td align="left">&#22312;&#23376;&#21306;&#22495;&#21152;&#36733;Action</td></tr><tr><td align="left">{string|Object} loadSubByPath( {string}domId, {string}path, {Object}opt_argMap )</td><td align="left">&#26681;&#25454;path&#22312;&#23376;&#21306;&#22495;&#21152;&#36733;Action</td></tr><tr><td align="left">{void} unloadSub( {string|Object}actionRuntime )</td><td align="left">&#21368;&#36733;action</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="section" title="3.5. Model"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203709216"></a>3.5. Model</h2></div></div></div><p>Model&#20316;&#20026;&#25968;&#25454;&#27169;&#22411;&#65292;&#29992;&#20110;&#19994;&#21153;&#36923;&#36753;&#30456;&#20851;&#30340;&#25968;&#25454;&#20445;&#25345;&#19982;&#22788;&#29702;&#12290;</p><div class="section" title="3.5.1. Model&#22768;&#26126;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203708192"></a>3.5.1. Model&#22768;&#26126;</h3></div></div></div><p>&#22312;ER&#20013;&#65292;Model&#20026;er.Model&#30340;&#23454;&#20363;&#12290;&#21021;&#22987;&#21270;&#30340;LOADER_LIST&#39033;&#29992;&#20110;&#37197;&#32622;&#21152;&#36733;&#22120;&#30340;&#21015;&#34920;&#12290;&#21152;&#36733;&#22120;&#26159;er.Model.Loader&#30340;&#23454;&#20363;&#12290;</p><p>&#21152;&#36733;&#20013;&#35843;&#29992;set&#26041;&#27861;&#21521;&#27169;&#22411;&#20013;&#22635;&#20805;&#25968;&#25454;&#12290;&#21152;&#36733;&#36807;&#31243;&#21487;&#33021;&#26159;&#24322;&#27493;&#30340;&#65292;&#27604;&#22914;&#36890;&#36807;XMLHttpRequest&#20174;server&#33719;&#21462;&#25968;&#25454;&#12290;&#21487;&#20197;&#36890;&#36807;stop&#21644;start&#26041;&#27861;&#25511;&#21046;&#21152;&#36733;&#21160;&#20316;&#12290;</p><div class="example"><a name="idm105203706448"></a><p class="title"><b>Example 3.2. er.Model:&#23454;&#20363;&#21270;</b></p><div class="example-contents"><pre class="programlisting">new er.Model( {
    LOADER_LIST: [ 'fieldLoader', 'listLoader' ],
    
    // &#21516;&#27493;&#21152;&#36733;&#36807;&#31243;&#65292;&#30452;&#25509;&#22635;&#20805;&#25968;&#25454;
    fieldLoader: new er.Model.Loader( function () {
        this.set( 'fields', [
            {
                title   : 'ID',
                field   : 'id',
                content : 'id',
                width   : 30,
                sortable: 1
            },
            {
                title   : '&#21517;&#31216;',
                field   : 'name',
                width   : 950,
                content : function ( item ) {
                    return item.name;
                }
            }
        ] );
    },
    
    // &#24322;&#27493;&#21152;&#36733;&#36807;&#31243;&#65292;&#35843;&#29992;stop&#21644;start&#26041;&#27861;
    listLoader: new er.Model.Loader( function () {
        this.stop();
        var me = this;

        baidu.ajax.get( 
            'data.php?' + me.getQueryString( {
                order   : 'order',
                orderBy : 'orderBy'
            } ), 
            function ( xhr ) {
                var data = baidu.json.parse( xhr.responseText );
                me.set( 'list', data );
                me.start();
            }
        );
    } ) )
} );</pre></div></div><br class="example-break"></div><div class="section" title="3.5.2. er.Model API&#21442;&#32771;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203705264"></a>3.5.2. er.Model API&#21442;&#32771;</h3></div></div></div><div class="table"><a name="idm105203704464"></a><p class="title"><b>Table 3.3. er.Model&#21021;&#22987;&#21270;&#21442;&#25968;</b></p><div class="table-contents"><table summary="er.Model&#21021;&#22987;&#21270;&#21442;&#25968;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">&#21517;&#31216;</th><th align="left">&#25551;&#36848;</th></tr></thead><tbody><tr><td align="left">{Array} LOADER_LIST</td><td align="left">&#27169;&#22411;loader&#21015;&#34920;</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idm105203703008"></a><p class="title"><b>Table 3.4. er.Model&#23454;&#20363;&#26041;&#27861;</b></p><div class="table-contents"><table summary="er.Model&#23454;&#20363;&#26041;&#27861;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">&#21517;&#31216;</th><th align="left">&#25551;&#36848;</th></tr></thead><tbody><tr><td align="left">{Any} get( {string} name )</td><td align="left">&#33719;&#21462;&#27169;&#22411;&#25968;&#25454;</td></tr><tr><td align="left">{void} set( {string} name, {Any} value, {Object} opt_option )</td><td align="left">&#35774;&#32622;&#27169;&#22411;&#25968;&#25454;&#12290;option&#23646;&#24615;&#26377;silence&#12290;</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idm105203691664"></a><p class="title"><b>Table 3.5. er.Model&#21021;&#22987;&#21270;&#21442;&#25968;</b></p><div class="table-contents"><table summary="er.Model&#21021;&#22987;&#21270;&#21442;&#25968;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">&#21517;&#31216;</th><th align="left">&#25551;&#36848;</th></tr></thead><tbody><tr><td align="left">{Array} LOADER_LIST</td><td align="left">&#27169;&#22411;loader&#21015;&#34920;</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idm105203690208"></a><p class="title"><b>Table 3.6. er.Model&#21021;&#22987;&#21270;&#21442;&#25968; (&#38750;object&#24418;&#24335;)</b></p><div class="table-contents"><table summary="er.Model&#21021;&#22987;&#21270;&#21442;&#25968; (&#38750;object&#24418;&#24335;)" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">&#21517;&#31216;</th><th align="left">&#25551;&#36848;</th></tr></thead><tbody><tr><td align="left">{Function} loadFunc</td><td align="left">&#27169;&#22411;&#21152;&#36733;&#20989;&#25968;</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idm105203685728"></a><p class="title"><b>Table 3.7. er.Model.Loader&#23454;&#20363;&#26041;&#27861;</b></p><div class="table-contents"><table summary="er.Model.Loader&#23454;&#20363;&#26041;&#27861;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">&#21517;&#31216;</th><th align="left">&#25551;&#36848;</th></tr></thead><tbody><tr><td align="left">{Any} get( {string} name )</td><td align="left">&#33719;&#21462;&#24403;&#21069;&#27169;&#22411;&#30340;&#25968;&#25454;</td></tr><tr><td align="left">{void} set( {string} name, {Any} value, {Object} opt_option )</td><td align="left">&#35774;&#32622;&#24403;&#21069;&#27169;&#22411;&#30340;&#25968;&#25454;&#12290;option&#23646;&#24615;&#26377;silence&#12290;</td></tr><tr><td align="left">{void} start( {void} )</td><td align="left">&#21551;&#21160;&#21152;&#36733;&#34892;&#20026;</td></tr><tr><td align="left">{void} stop( {void} )</td><td align="left">&#26242;&#20572;&#21152;&#36733;&#34892;&#20026;</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="section" title="3.6. &#27169;&#26495;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203670256"></a>3.6. &#27169;&#26495;</h2></div></div></div><p>&#23545;&#20110;web&#31995;&#32479;&#30340;&#35270;&#22270;&#26469;&#35828;&#65292;&#27983;&#35272;&#22120;&#35299;&#26512;html&#24182;&#23637;&#29616;&#12290;&#22312;ER&#20013;&#65292;html&#29255;&#27573;&#26159;&#36890;&#36807;&#27169;&#26495;&#25991;&#20214;&#26469;&#31649;&#29702;&#30340;&#12290;&#27169;&#26495;&#25991;&#20214;&#26159;&#19968;&#20010;html&#25991;&#26412;&#25991;&#20214;&#65292;&#21487;&#20197;&#22312;&#20219;&#20309;html&#32534;&#36753;&#22120;&#20013;&#33719;&#24471;&#33258;&#21160;&#23436;&#25104;&#12289;&#35821;&#27861;&#39640;&#20142;&#31561;&#21151;&#33021;&#30340;&#25903;&#25345;&#12290;</p><div class="section" title="3.6.1. &#27169;&#26495;&#21152;&#36733;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203668816"></a>3.6.1. &#27169;&#26495;&#21152;&#36733;</h3></div></div></div><p>&#36890;&#36807;&#37197;&#32622;er.config.TEMPLATE_LIST&#65292;&#26694;&#26550;&#21551;&#21160;&#26102;&#65288;&#35843;&#29992;er.init&#26102;&#65289;&#20250;&#33258;&#21160;&#21152;&#36733;&#27169;&#26495;&#25991;&#20214;&#24182;&#35299;&#26512;&#12290;</p><div class="example"><a name="idm105203667504"></a><p class="title"><b>Example 3.3. &#37197;&#32622;&#27169;&#26495;&#25991;&#20214;</b></p><div class="example-contents"><pre class="programlisting">er.config.TEMPLATE_LIST = [ 'tpl1.html', 'tpl2.html' ];</pre></div></div><br class="example-break"></div><div class="section" title="3.6.2. &#27169;&#26495;&#35268;&#21017;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203666224"></a>3.6.2. &#27169;&#26495;&#35268;&#21017;</h3></div></div></div><p>ER&#30340;&#27169;&#26495;&#35268;&#21017;&#65292;&#26159;&#36890;&#36807;html&#27880;&#37322;&#22768;&#26126;&#30340;&#12290;&#26368;&#23567;&#31890;&#24230;&#30340;html&#29255;&#27573;&#21333;&#20301;&#20026;target&#12290;&#27169;&#26495;&#25903;&#25345;&#24120;&#29992;&#30340;&#21464;&#37327;&#26367;&#25442;&#21151;&#33021;&#12290;</p><div class="example"><a name="idm105203664736"></a><p class="title"><b>Example 3.4. &#31616;&#21333;&#27169;&#26495;</b></p><div class="example-contents"><pre class="programlisting">&lt;!-- target: hello --&gt;
&lt;span&gt;Hello &lt;em&gt;${name}&lt;/em&gt;!&lt;/span&gt;</pre></div></div><br class="example-break"><p>&#36890;&#24120;&#20026;&#20102;&#23433;&#20840;&#24615;&#65292;&#25105;&#20204;&#38656;&#35201;&#23545;&#20869;&#23481;&#36827;&#34892;&#32534;&#30721;&#12290;&#21487;&#20197;&#36890;&#36807;&#8220;|&#8221;&#23558;&#21464;&#37327;&#20869;&#23481;&#20256;&#36882;&#32473;&#36807;&#28388;&#22120;&#36827;&#34892;&#22788;&#29702;&#12290;&#21407;&#29983;&#25903;&#25345;&#30340;&#36807;&#28388;&#22120;&#26377;html&#21644;url&#12290;</p><div class="example"><a name="idm105203663136"></a><p class="title"><b>Example 3.5. &#21464;&#37327;&#26367;&#25442;&#36807;&#28388;&#22120;</b></p><div class="example-contents"><pre class="programlisting">&lt;!-- target: hello --&gt;
&lt;span&gt;Hello &lt;a href="url?id=${id|url}" target="_blank"&gt;${name|html}&lt;/a&gt;!&lt;/span&gt;</pre></div></div><br class="example-break"><p>&#27169;&#26495;&#25903;&#25345;import&#35268;&#21017;&#65292;&#20801;&#35768;&#24341;&#20837;&#24050;&#32463;&#23384;&#22312;&#30340;target&#27169;&#26495;&#29255;&#27573;&#65292;&#26080;&#38656;&#32534;&#20889;&#22810;&#27425;&#12290;</p><div class="example"><a name="idm105203661440"></a><p class="title"><b>Example 3.6. &#36890;&#36807;import&#36827;&#34892;&#27169;&#26495;&#22797;&#29992;</b></p><div class="example-contents"><pre class="programlisting">&lt;!-- target: title --&gt;
&lt;h2&gt;${title|html}&lt;/h2&gt;

&lt;!-- target: page1 --&gt;
&lt;!-- import: title --&gt;
&lt;div class="content"&gt;......&lt;/div&gt;
</pre></div></div><br class="example-break"><p>&#26377;&#26102;&#25105;&#20204;&#24076;&#26395;&#22810;&#20010;&#27169;&#26495;&#30340;&#24067;&#23616;&#26159;&#19968;&#26679;&#30340;&#65292;&#20294;&#26159;&#37324;&#38754;&#20869;&#23481;&#19981;&#19968;&#26679;&#12290;ER&#26694;&#26550;&#30340;&#27169;&#26495;&#25552;&#20379;&#20102;&#23545;&#27597;&#29256;&#21151;&#33021;&#30340;&#25903;&#25345;&#65292;&#33021;&#26041;&#20415;&#30340;&#20570;&#21040;&#36825;&#31181;&#22797;&#29992;&#12290;&#30456;&#20851;&#21151;&#33021;&#30340;&#26631;&#31614;&#26377;master&#12289;target&#12289;contentplaceholder&#12289;content&#12290;</p><div class="example"><a name="idm105203659616"></a><p class="title"><b>Example 3.7. &#36890;&#36807;master&#36827;&#34892;&#27169;&#26495;&#22797;&#29992;</b></p><div class="example-contents"><pre class="programlisting">&lt;!-- master: myMaster --&gt;
&lt;h2&gt;${title|html}&lt;/h2&gt;
&lt;div class="content"&gt;&lt;!-- contentplaceholder: content --&gt;&lt;/div&gt;
&lt;div class="foot"&gt;&lt;!-- contentplaceholder: foot --&gt;&lt;/div&gt;

&lt;!-- target: page1(master=myMaster) --&gt;
&lt;!-- content:content --&gt;
&lt;span&gt;Hello &lt;a href="url?id=${id|url}" target="_blank"&gt;${name|html}&lt;/a&gt;!&lt;/span&gt;

&lt;!-- content:foot --&gt;
copyright &amp;copy; erik
</pre></div></div><br class="example-break"><p>&#27169;&#26495;&#25903;&#25345;&#31616;&#21333;&#30340;if-elif-else&#36923;&#36753;&#20998;&#25903;&#65292;&#35821;&#27861;&#20026;if: ConditionalExpression&#25110;elif: ConditionalExpression&#65292;ConditionalExpression&#25903;&#25345;||&#12289;&amp;&amp;&#12289;relational(&gt;|&gt;=|&lt;|&lt;=|==|!=|===|!==)&#12289;!&#12289;${variable}&#12289;number&#12289;string&#21644;()&#25324;&#21495;&#34920;&#36798;&#24335;&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;&#31034;&#20363;&#12290;</p><div class="example"><a name="idm105203657408"></a><p class="title"><b>Example 3.8. &#27169;&#26495;&#20013;&#30340;&#36923;&#36753;&#20998;&#25903;</b></p><div class="example-contents"><pre class="programlisting">&lt;!-- target: page1 --&gt;
&lt;!-- if: ${name} --&gt;
hello ${name}
&lt;!-- else --&gt;
nobody
&lt;!-- /if --&gt;

&lt;!-- if: ${number} &gt; 0 --&gt;
larger than zero
&lt;!-- elif: ${number} == 0 --&gt;
zero
&lt;!-- else --&gt;
invalid
&lt;!-- /if --&gt;
</pre></div></div><br class="example-break"><p>&#27169;&#26495;&#25903;&#25345;for as&#23545;&#25968;&#32452;&#20013;&#30340;&#27599;&#19968;&#39033;&#36827;&#34892;&#36941;&#21382;&#65292;&#35821;&#27861;&#20026;for: ${list} as ${item},${index}&#65292;&#20854;&#20013;${index}&#21487;&#36873;&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;&#31034;&#20363;&#12290;</p><div class="example"><a name="idm105203655760"></a><p class="title"><b>Example 3.9. &#27169;&#26495;&#20013;&#30340;&#24490;&#29615;</b></p><div class="example-contents"><pre class="programlisting">&lt;!-- target: page1 --&gt;
&lt;ul&gt;
&lt;!-- for: ${persons} as ${person}, ${index} --&gt;
&lt;li&gt;${index}: ${person.name}
&lt;!-- /for --&gt;
&lt;/ul&gt;
</pre></div></div><br class="example-break"></div><div class="section" title="3.6.3. er.template API&#21442;&#32771;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203665968"></a>3.6.3. er.template API&#21442;&#32771;</h3></div></div></div><div class="table"><a name="idm105203654032"></a><p class="title"><b>Table 3.8. er.locator&#38745;&#24577;&#26041;&#27861;</b></p><div class="table-contents"><table summary="er.locator&#38745;&#24577;&#26041;&#27861;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">&#21517;&#31216;</th><th align="left">&#25551;&#36848;</th></tr></thead><tbody><tr><td align="left">{string} get( {string} name )</td><td align="left">&#33719;&#21462;&#25351;&#23450;&#27169;&#26495;target&#30340;HTML&#29255;&#27573;</td></tr><tr><td align="left">{void} merge( {HTMLElement} output, {string} tplName, {string} opt_privateContextId )</td><td align="left">&#21512;&#24182;&#27169;&#26495;&#19982;&#25968;&#25454;</td></tr><tr><td align="left">{void} parse( {string} source )</td><td align="left">&#35299;&#26512;&#27169;&#26495;</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="section" title="3.7. View"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203645360"></a>3.7. View</h2></div></div></div><p>View&#36127;&#36131;&#35270;&#22270;&#30340;&#28210;&#26579;&#65292;&#23454;&#29616;&#25968;&#25454;&#20197;&#29305;&#23450;&#26041;&#24335;&#26174;&#31034;&#12290;&#22312;ER&#20013;&#65292;View&#26159;er.View&#30340;&#23454;&#20363;&#65292;&#20854;&#36890;&#36807;&#27169;&#26495;&#28210;&#26579;&#21644;&#22635;&#20805;html&#65292;&#24182;&#35843;&#29992;UI&#32452;&#20214;&#24211;&#30340;&#30456;&#24212;&#25509;&#21475;&#65292;&#23454;&#29616;UI&#32452;&#20214;&#30340;&#28210;&#26579;&#12290;</p><p>&#22312;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;er.View&#23454;&#20363;&#19981;&#29992;&#20154;&#24037;&#21019;&#24314;&#65292;&#38500;&#38750;&#26377;&#29305;&#27530;&#30340;&#28210;&#26579;&#35201;&#27714;&#25110;&#34892;&#20026;&#12290;&#19979;&#38754;&#26159;&#21019;&#24314;&#19968;&#20010;&#31616;&#21333;&#30340;View&#23454;&#20363;&#30340;&#20363;&#23376;&#12290;</p><div class="example"><a name="idm105203643488"></a><p class="title"><b>Example 3.10. er.View: &#21019;&#24314;View&#23454;&#20363;</b></p><div class="example-contents"><pre class="programlisting">new er.View( {
        template: 'templateName'
    } );</pre></div></div><br class="example-break"></div><div class="section" title="3.8. Module"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203642368"></a>3.8. Module</h2></div></div></div><p>&#22312;&#31995;&#32479;&#35774;&#35745;&#30340;&#26102;&#20505;&#65292;&#25105;&#20204;&#36890;&#24120;&#20250;&#25226;&#20855;&#26377;&#19968;&#31867;&#25277;&#35937;&#30340;&#21151;&#33021;&#38598;&#21512;&#21010;&#20998;&#21040;&#19968;&#20010;&#21333;&#29420;&#30340;&#27169;&#22359;&#65292;&#27604;&#22914;&#8220;book&#8221;&#30340;&#22686;&#21024;&#25913;&#26597;&#12290;&#32780;&#22312;ER&#26694;&#26550;&#20013;&#65292;&#25105;&#20204;&#35748;&#20026;&#19968;&#31867;&#19994;&#21153;&#21151;&#33021;&#24212;&#35813;&#24402;&#23646;&#19982;&#19968;&#20010;&#27169;&#22359;&#65292;&#36825;&#23601;&#26159;ER&#26694;&#26550;&#30340;&#8220;Module&#8221;&#27010;&#24565;&#12290;</p><p>&#22768;&#26126;&#19968;&#20010;&#24212;&#29992;&#27169;&#22359;&#65292;&#38656;&#35201;&#20256;&#20837;&#19968;&#20010;Javascript Object&#12290;&#19979;&#38754;&#26159;&#27169;&#22359;&#22768;&#26126;&#30340;&#20363;&#23376;:</p><div class="example"><a name="idm105203640416"></a><p class="title"><b>Example 3.11. er.Module: &#22768;&#26126;&#19994;&#21153;&#27169;&#22359;</b></p><div class="example-contents"><pre class="programlisting">var book = new er.Module( {
        config: {
            'action': [
                {
                    path   : '/book',
                    action : 'book.list'
                }
            ]
        }
    } );</pre></div></div><br class="example-break"><div class="tip" title="Tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>&#25105;&#20204;&#20351;&#29992;&#8220;new er.Module&#8221;&#30340;&#26041;&#27861;&#22768;&#26126;&#20102;&#19968;&#20010;&#27169;&#22359;&#65292;&#24182;&#20256;&#20837;&#19968;&#20010;&#24102;&#26377;config&#23646;&#24615;&#30340;Javascript Object&#12290;&#36890;&#24120;Module&#30340;config&#25104;&#21592;&#26159;&#24517;&#39035;&#30340;&#65292;config&#23646;&#24615;&#21482;&#33021;&#29992;&#20110;&#20445;&#23384;Module&#30340;&#37197;&#32622;&#20449;&#24687;&#12290;&#22312;&#36825;&#37324;&#65292;&#25105;&#20204;&#20808;&#19981;&#20851;&#24515;config&#23646;&#24615;&#30340;&#20869;&#23481;&#12290;&#25105;&#20204;&#30693;&#36947;&#65292;&#22312;Javascript&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;Object&#34920;&#31034;&#19968;&#20010;module&#25110;&#19968;&#20010;namespace&#12290;&#22312;er&#26694;&#26550;&#20013;&#65292;&#8220;new er.Module&#8221;&#20854;&#23454;&#36824;&#26159;&#23558;&#20256;&#20837;&#30340;&#23545;&#35937;&#36820;&#22238;&#65292;&#21482;&#26159;&#22312;&#20869;&#37096;&#21521;&#25511;&#21046;&#22120;&#36827;&#34892;&#27880;&#20876;&#65292;&#32780;&#36825;&#31181;&#22768;&#26126;Module&#30340;&#26041;&#24335;&#26356;&#23481;&#26131;&#29702;&#35299;&#12290;&#25152;&#20197;&#65292;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;book&#21464;&#37327;&#30340;&#24341;&#29992;&#20854;&#23454;&#23601;&#26159;&#25105;&#20204;&#20256;&#20837;&#30340;Javascript Object&#12290;</p></div><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>&#23545;&#20110;&#25972;&#31449;&#24335;Ajax&#31995;&#32479;&#65292;&#19968;&#20010;&#39029;&#38754;&#20013;&#21253;&#21547;&#20102;&#24456;&#22810;Javascript&#33050;&#26412;&#65292;&#22312;&#36825;&#20010;&#26102;&#20505;&#65292;&#22914;&#26524;&#27599;&#20010;&#21151;&#33021;&#22312;&#23454;&#29616;&#26102;&#37117;&#20351;&#29992;&#20840;&#23616;&#21464;&#37327;&#65292;&#20250;&#26377;&#20914;&#31361;&#30340;&#21361;&#38505;&#65292;&#20914;&#31361;&#36896;&#25104;&#30340;&#32467;&#26524;&#26159;&#26080;&#27861;&#39044;&#27979;&#30340;&#65292;&#24182;&#19988;&#24456;&#38590;&#36861;&#26597;&#12290;&#25152;&#20197;&#25105;&#20204;&#26368;&#22909;&#32479;&#19968;&#31649;&#29702;&#20840;&#23616;&#21464;&#37327;&#65292;&#36827;&#34892;&#27169;&#22359;&#21010;&#20998;&#65292;&#21482;&#26377;&#39030;&#32423;&#27169;&#22359;&#20351;&#29992;&#20840;&#23616;&#21464;&#37327;&#12290;</p></div><div class="section" title="3.8.1. er.Module API&#21442;&#32771;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203637248"></a>3.8.1. er.Module API&#21442;&#32771;</h3></div></div></div><div class="table"><a name="idm105203636576"></a><p class="title"><b>Table 3.9. er.Module&#21021;&#22987;&#21270;&#21442;&#25968;</b></p><div class="table-contents"><table summary="er.Module&#21021;&#22987;&#21270;&#21442;&#25968;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">&#21517;&#31216;</th><th align="left">&#25551;&#36848;</th></tr></thead><tbody><tr><td align="left">{Object} moduleObj</td><td align="left">module&#23545;&#35937;&#65292;&#36890;&#24120;&#35813;&#23545;&#35937;&#21253;&#21547;&#19968;&#20010;&#20855;&#26377;action&#37197;&#32622;&#30340;config&#23646;&#24615;</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="section" title="3.9. Action"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203635040"></a>3.9. Action</h2></div></div></div><p>Action&#23545;&#27169;&#22411;&#19982;&#35270;&#22270;&#36827;&#34892;&#36873;&#25321;&#19982;&#21305;&#37197;&#65292;&#23436;&#25104;&#29992;&#25143;&#34892;&#20026;&#30340;&#22788;&#29702;&#12290;&#36890;&#24120;&#20182;&#26159;er.Action&#30340;&#23454;&#20363;&#12290;</p><div class="section" title="3.9.1. &#21019;&#24314;Action"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203629216"></a>3.9.1. &#21019;&#24314;Action</h3></div></div></div><p>&#25105;&#20204;&#20351;&#29992;&#8220;new er.Action&#8221;&#30340;&#26041;&#27861;&#22768;&#26126;&#20102;&#19968;&#20010;Action&#23545;&#35937;&#65292;&#20256;&#20837;&#19968;&#20010;Javascript Object&#12290;&#26694;&#26550;&#20250;&#35753;&#25105;&#20204;&#30340;Action&#25317;&#26377;&#21021;&#22987;&#21270;&#25968;&#25454;&#12289;&#28210;&#26579;&#39029;&#38754;&#31561;&#21151;&#33021;&#12290;</p><div class="example"><a name="idm105203627840"></a><p class="title"><b>Example 3.12. er.Action: &#22768;&#26126;Action</b></p><div class="example-contents"><pre class="programlisting">
    book.list = new er.Action( {
        model: book.listModel,
        view: 'book'
    } );</pre></div></div><br class="example-break"><p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#25105;&#20204;&#21019;&#24314;&#20102;&#19968;&#20010;Action&#65292;&#24182;&#25351;&#23450;&#20102;model&#21644;view&#12290;</p><p>model&#24517;&#39035;&#26159;&#19968;&#20010;er.Model&#30340;&#23454;&#20363;&#12290;</p><p>view&#21487;&#20197;&#26159;er.View&#30340;&#23454;&#20363;&#65292;&#20294;&#26356;&#22810;&#26102;&#20505;&#25105;&#20204;&#25351;&#23450;string&#65292;&#26694;&#26550;&#20250;&#33258;&#21160;&#20351;&#29992;&#30456;&#24212;target&#30340;&#27169;&#26495;&#36827;&#34892;&#28210;&#26579;&#12290;&#39069;&#22806;&#22320;&#65292;&#25105;&#20204;&#21487;&#20197;&#25351;&#23450;&#19968;&#20010;function&#65292;&#36820;&#22238;string&#20316;&#20026;&#27169;&#26495;&#21517;&#12290;</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>template&#23646;&#24615;&#21487;&#20197;&#26367;&#20195;view&#23646;&#24615;&#12290;template&#23646;&#24615;&#20801;&#35768;&#25509;&#21463;string&#20316;&#20026;&#27169;&#26495;&#21517;&#65292;&#25110;&#32773;function&#29992;&#20110;&#36820;&#22238;&#27169;&#26495;&#21517;&#12290;&#20294;&#26159;template&#23646;&#24615;&#19981;&#33021;&#25509;&#21463;new er.View&#12290;</p></div><div class="tip" title="Tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>&#36890;&#24120;&#25105;&#20204;&#23558;&#21019;&#24314;&#30340;Action&#23545;&#35937;&#20316;&#20026;&#25152;&#23646;&#27169;&#22359;&#30340;&#23646;&#24615;&#65292;&#36825;&#26679;&#21033;&#20110;&#23545;&#21516;&#19968;&#31867;&#36164;&#28304;&#30340;&#31649;&#29702;&#12290;&#23545;&#20110;&#21019;&#24314;&#30340;er.Module&#23545;&#35937;&#65292;&#25105;&#20204;&#21487;&#20197;&#25226;&#20854;&#30475;&#20316;&#26159;package&#12290;</p></div></div><div class="section" title="3.9.2. &#37197;&#32622;Action"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203623584"></a>3.9.2. &#37197;&#32622;Action</h3></div></div></div><p>&#21019;&#24314;&#23436;&#25104;&#21518;&#65292;&#25105;&#20204;&#38656;&#35201;&#22312;Module&#30340;config&#20013;&#37197;&#32622;&#36825;&#20010;Action&#12290;config&#38656;&#35201;&#21253;&#21547;&#19968;&#20010;&#21517;&#31216;&#20026;&#8220;action&#8221;&#30340;&#37197;&#32622;&#39033;&#12290;action&#37197;&#32622;&#39033;&#26159;&#19968;&#20010;&#25968;&#32452;&#65292;&#29992;&#20110;&#37197;&#32622;&#27169;&#22359;&#19979;&#30340;&#25152;&#26377;Action&#12290;&#19979;&#38754;&#22238;&#39038;&#19968;&#19979;&#20043;&#21069;&#27169;&#22359;&#21019;&#24314;&#30340;&#20363;&#23376;&#65306;</p><div class="example"><a name="idm105203622304"></a><p class="title"><b>Example 3.13. &#37197;&#32622;Action</b></p><div class="example-contents"><pre class="programlisting">
    var book = new er.Module({
        config: {
            'action': [
                {
                    path: '/book',
                    action: 'book.list'
                }
            ]
        }
    });</pre></div></div><br class="example-break"><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#30340;&#37197;&#32622;&#20013;&#65292;&#19968;&#20010;&#37197;&#32622;&#39033;&#26159;&#19968;&#20010;Object&#65292;&#21253;&#21547;&#20102;path&#21644;action&#20004;&#20010;&#23646;&#24615;&#12290;&#21547;&#20041;&#26159;&#65306;&#25351;&#23450;Location&#30340;path&#20026;/book&#26102;&#65292;&#26694;&#26550;&#23558;&#23545;&#35775;&#38382;&#30340;&#22788;&#29702;&#20132;&#32473;book.list&#36825;&#20010;Action&#12290;&#20174;&#36825;&#20010;&#20363;&#23376;&#37324;&#25105;&#20204;&#20063;&#33021;&#30475;&#20986;&#65292;&#19981;&#21516;&#30340;path&#21487;&#20197;&#20351;&#29992;&#21516;&#19968;&#20010;Action&#36827;&#34892;&#22788;&#29702;&#65292;&#20294;&#26159;&#19968;&#20010;path&#21482;&#33021;&#26377;&#19968;&#20010;&#22788;&#29702;Action&#12290;</p></div><div class="section" title="3.9.3. Action&#30340;enter"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203620160"></a>3.9.3. Action&#30340;enter</h3></div></div></div><p>&#24403;&#29992;&#25143;&#35831;&#27714;&#34987;&#36716;&#21457;&#32473;Aciton&#21518;&#65292;Action&#24320;&#22987;&#25191;&#34892;&#19968;&#31995;&#21015;&#21160;&#20316;&#65292;&#36825;&#20010;&#36807;&#31243;&#25105;&#20204;&#31216;&#20026;Action&#30340;enter&#12290;</p><p>&#26694;&#26550;&#20026;Action&#30340;enter&#20998;&#20102;&#20004;&#20010;&#38454;&#27573;&#65306;&#21152;&#36733;model&#21644;&#26356;&#26032;view&#12290;&#19979;&#38754;&#26159;Action&#30340;enter&#36807;&#31243;&#22270;&#12290;</p><div><img src="er_action_enter.jpg"></div><p>ER&#26694;&#26550;&#26356;&#26032;&#35270;&#22270;&#26377;&#20004;&#31181;&#27169;&#24335;&#65306;render&#21644;repaint&#12290;&#27491;&#24120;&#24773;&#20917;&#19979;&#65292;&#20351;&#29992;render&#27169;&#24335;&#26356;&#26032;&#35270;&#22270;&#65292;&#20351;&#29992;VIEW&#25351;&#23450;&#30340;html&#27169;&#26495;&#29255;&#27573;&#21047;&#26032;&#25972;&#20010;&#35270;&#22270;&#21306;&#22495;&#12290;&#24403;&#26469;&#28304;Location&#30340;path&#19982;&#24403;&#21069;path&#30456;&#21516;&#26102;&#65292;ER&#26694;&#26550;&#35748;&#20026;&#20173;&#22788;&#20110;&#24403;&#21069;Action&#29615;&#22659;&#20013;&#65292;&#37319;&#29992;repaint&#27169;&#24335;&#26356;&#26032;&#35270;&#22270;&#12290;&#36825;&#31181;&#26426;&#21046;&#21033;&#20110;&#25968;&#25454;&#21464;&#21270;&#26102;&#23616;&#37096;&#21047;&#26032;&#30340;&#23454;&#29616;&#12290;</p></div><div class="section" title="3.9.4. &#34892;&#20026;&#21021;&#22987;&#21270;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203618064"></a>3.9.4. &#34892;&#20026;&#21021;&#22987;&#21270;</h3></div></div></div><p>&#23545;&#20110;&#19968;&#20010;&#23500;&#23458;&#25143;&#31471;&#24212;&#29992;&#26469;&#35828;&#65292;&#22312;&#20016;&#23500;&#30340;&#20132;&#20114;&#19979;&#65292;&#25105;&#20204;&#38656;&#35201;&#20026;&#39029;&#38754;&#30340;dom&#20803;&#32032;&#32465;&#23450;&#19968;&#20123;&#20107;&#20214;&#22788;&#29702;&#20989;&#25968;&#65292;&#25110;&#32773;&#20026;&#39029;&#38754;&#20013;&#30340;&#25511;&#20214;&#32465;&#23450;&#19968;&#20123;&#33258;&#23450;&#20041;&#20107;&#20214;&#30340;&#22788;&#29702;&#20989;&#25968;&#12290;&#36825;&#20123;&#20132;&#20114;&#25105;&#20204;&#31216;&#20026;&#29992;&#25143;&#34892;&#20026;&#65292;&#32780;&#20132;&#20114;&#20107;&#20214;&#30340;&#32465;&#23450;&#25105;&#20204;&#31216;&#20026;&#8220;&#34892;&#20026;&#21021;&#22987;&#21270;&#8221;&#12290;</p><p>ER&#26694;&#26550;&#20869;&#32622;&#20102;&#19968;&#20123;&#20107;&#20214;&#65292;&#35270;&#22270;render&#30340;&#21069;&#21518;&#20250;&#20998;&#21035;&#35302;&#21457;onbeforerender&#21644;onafterrender&#20107;&#20214;&#65292;&#35270;&#22270;repaint&#30340;&#21069;&#21518;&#20250;&#20998;&#21035;&#35302;&#21457;onbeforerepaint&#21644;onafterrepaint&#20107;&#20214;&#65292;&#23436;&#25104;&#35270;&#22270;&#26356;&#26032;&#21518;&#26368;&#21518;&#20250;&#35302;&#21457;onentercomplete&#20107;&#20214;&#12290;&#34892;&#20026;&#21021;&#22987;&#21270;&#25105;&#20204;&#21487;&#20197;&#22312;&#24688;&#24403;&#30340;&#20107;&#20214;&#20013;&#23436;&#25104;&#65292;&#24120;&#29992;&#30340;&#26159;onafterrender&#21644;onentercomplete&#12290;</p></div><div class="section" title="3.9.5. &#33258;&#21160;&#21152;&#36733;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203614528"></a>3.9.5. &#33258;&#21160;&#21152;&#36733;</h3></div></div></div><p>&#36890;&#24120;&#23545;&#20110;&#19968;&#20010;web&#24212;&#29992;&#26469;&#35828;&#65292;&#20026;&#20102;&#20248;&#21270;http&#36830;&#25509;&#25968;&#65292;&#20250;&#23558;&#24320;&#21457;&#26102;&#25152;&#26377;javascript&#25991;&#20214;&#21512;&#24182;&#25104;&#19968;&#20010;&#12290;&#20294;&#26159;&#36825;&#26679;&#20570;&#30340;&#24330;&#31471;&#26159;&#25991;&#20214;&#36807;&#22823;&#65292;&#23545;&#20110;&#32593;&#36895;&#36739;&#24930;&#30340;&#29992;&#25143;&#65292;&#31561;&#24453;&#26102;&#38388;&#20250;&#24456;&#38271;&#12290;</p><p>ER&#26694;&#26550;&#25552;&#20379;&#20102;Action&#30340;&#33258;&#21160;&#21152;&#36733;&#26426;&#21046;&#65306;&#24403;location&#36339;&#21040;&#30456;&#24212;&#30340;path&#26102;&#65292;&#22914;&#26524;&#30456;&#24212;&#30340;Action&#19981;&#23384;&#22312;&#65292;&#21017;&#20250;&#33258;&#21160;&#35831;&#27714;&#30456;&#24212;&#30340;Action&#25991;&#20214;&#12290;&#19979;&#38754;&#19968;&#20123;&#37197;&#32622;&#39033;&#20915;&#23450;&#20102;&#22914;&#20309;&#36890;&#36807;path&#26597;&#25214;&#21040;Action&#25991;&#20214;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>er.config.ACTION_ROOT&#65306;Action&#30340;&#25991;&#20214;&#26681;&#36335;&#24452;</p></li><li class="listitem"><p>er.config.ACTION_AUTOLOAD&#65306;&#33258;&#21160;&#21152;&#36733;&#27169;&#24335;&#12290;&#40664;&#35748;&#19981;&#24320;&#21551;&#33258;&#21160;&#21152;&#36733;&#27169;&#24335;&#12290;&#35774;&#32622;&#20026;true&#26102;&#24320;&#21551;&#20026;"Module"&#33258;&#21160;&#21152;&#36733;&#27169;&#24335;&#65292;&#22914;myModule.auto&#23545;&#24212;&#30340;&#25991;&#20214;&#20026;ACTION_ROOT/myModule.js&#12290;&#35774;&#32622;&#20026;"action"&#26102;&#24320;&#21551;&#20026;"Action"&#33258;&#21160;&#21152;&#36733;&#27169;&#24335;&#65292;&#22914;myModule.auto&#23545;&#24212;&#30340;&#25991;&#20214;&#20026;ACTION_ROOT/myModule/auto.js</p></li><li class="listitem"><p>er.config.ACTION_PATH&#65306;&#36825;&#26159;&#19968;&#20010;kv&#34920;&#12290;key&#20026;action&#30340;&#21517;&#31216;&#65307;value&#20026;&#25991;&#20214;&#36335;&#24452;&#65292;&#30456;&#23545;&#20110;ACTION_ROOT&#12290;</p></li><li class="listitem"><p>&#36890;&#36807;ESUI&#32452;&#20214;&#24211;&#65292;&#25552;&#20379;&#23545;&#22797;&#26434;&#20132;&#20114;&#30340;&#25903;&#25345;&#12290;</p></li></ol></div></div><div class="section" title="3.9.6. Action&#30340;event"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203608880"></a>3.9.6. Action&#30340;event</h3></div></div></div><p>Action&#25903;&#25345;&#36890;&#36807;fireEvent&#26041;&#27861;&#35302;&#21457;&#20107;&#20214;&#12290;&#36890;&#24120;&#29992;&#20110;&#39029;&#38754;&#20013;&#21253;&#21547;&#22810;Action&#21306;&#22495;&#26102;&#30340;&#20132;&#20114;&#12290;</p><div class="example"><a name="idm105203607744"></a><p class="title"><b>Example 3.14. Action&#30340;&#20107;&#20214;</b></p><div class="example-contents"><pre class="programlisting">
    // Action&#31034;&#20363;
    city.list = new er.Action({
        ......

        onCityChange: function ( city ) {
            this.model.set( 'city', city );
            // TODO: refresh view
        }
    });
    
    // &#20107;&#20214;&#35302;&#21457;&#31034;&#20363;
    er.controller.fireMain( 'CityChange', 2 );
    </pre></div></div><br class="example-break"></div><div class="section" title="3.9.7. er.Action API&#21442;&#32771;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203606320"></a>3.9.7. er.Action API&#21442;&#32771;</h3></div></div></div><div class="table"><a name="idm105203605680"></a><p class="title"><b>Table 3.10. er.Action&#21021;&#22987;&#21270; - option&#21442;&#25968;</b></p><div class="table-contents"><table summary="er.Action&#21021;&#22987;&#21270; - option&#21442;&#25968;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">&#21517;&#31216;</th><th align="left">&#25551;&#36848;</th></tr></thead><tbody><tr><td align="left">{string} BACK_LOCATION</td><td align="left">&#24403;&#35843;&#29992;Action&#30340;back&#26102;&#65292;&#22914;&#26524;&#27809;&#26377;referer&#65292;&#21017;&#36339;&#36716;&#21040;&#25351;&#23450;&#30340;BACK_LOCATION</td></tr><tr><td align="left">{boolean} IGNORE_STATE</td><td align="left">&#26159;&#21542;&#20851;&#38381;&#29366;&#24577;&#20445;&#25345;&#30340;&#21151;&#33021;</td></tr><tr><td align="left">{Object} STATE_MAP</td><td align="left">&#35201;&#20445;&#25345;&#30340;&#29366;&#24577;&#38598;&#21512;&#12290;&#8220;&#29366;&#24577;&#21517;/&#29366;&#24577;&#40664;&#35748;&#20540;&#8221;&#24418;&#24335;&#30340;map</td></tr><tr><td align="left">{er.Model} model</td><td align="left">&#23545;&#24212;&#30340;&#25968;&#25454;&#27169;&#22411;&#23545;&#35937;</td></tr><tr><td align="left">{string|er.View} view</td><td align="left">&#27169;&#26495;&#21517;&#25110;&#23545;&#24212;&#30340;&#35270;&#22270;&#28210;&#26579;&#23545;&#35937;</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idm105203594016"></a><p class="title"><b>Table 3.11. er.Action &#23454;&#20363;&#26041;&#27861;</b></p><div class="table-contents"><table summary="er.Action &#23454;&#20363;&#26041;&#27861;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">&#21517;&#31216;</th><th align="left">&#25551;&#36848;</th></tr></thead><tbody><tr><td align="left">{void} refresh( {void} )</td><td align="left">&#21047;&#26032;&#24403;&#21069;action&#39029;&#38754;&#65292;&#21482;&#20445;&#23384;&#38656;&#35201;&#20445;&#25345;&#30340;state&#25968;&#25454;</td></tr><tr><td align="left">{void} resetState( {string} opt_name )</td><td align="left">&#37325;&#32622;&#29366;&#24577;&#20540;&#65292;&#26080;&#21442;&#25968;&#26102;&#37325;&#32622;&#25152;&#26377;&#29366;&#24577;</td></tr><tr><td align="left">{Object} STATE_MAP</td><td align="left">&#35201;&#20445;&#25345;&#30340;&#29366;&#24577;&#38598;&#21512;&#12290;&#8220;&#29366;&#24577;&#21517;/&#29366;&#24577;&#40664;&#35748;&#20540;&#8221;&#24418;&#24335;&#30340;map</td></tr><tr><td align="left">{er.Model} model</td><td align="left">&#23545;&#24212;&#30340;&#25968;&#25454;&#27169;&#22411;&#23545;&#35937;</td></tr><tr><td align="left">{string|er.View} view</td><td align="left">&#27169;&#26495;&#21517;&#25110;&#23545;&#24212;&#30340;&#35270;&#22270;&#28210;&#26579;&#23545;&#35937;</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="section" title="3.10. &#26435;&#38480;&#25511;&#21046;&#19982;&#37197;&#32622;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203582608"></a>3.10. &#26435;&#38480;&#25511;&#21046;&#19982;&#37197;&#32622;</h2></div></div></div><p>&#26435;&#38480;&#31649;&#29702;&#21151;&#33021;&#36890;&#24120;&#29992;&#20110;&#38656;&#35201;&#30331;&#24405;&#30340;&#31995;&#32479;&#20013;&#12290;er&#26694;&#26550;&#25552;&#20379;&#20102;&#19968;&#20010;&#31616;&#21333;&#30340;&#27169;&#22359;&#8220;er.permission&#8221;&#65292;&#29992;&#20110;&#26435;&#38480;&#31649;&#29702;&#12290;&#35813;&#27169;&#22359;&#25552;&#20379;&#20102;&#20004;&#20010;&#26041;&#27861;&#65306;init&#21644;isAllow&#12290;</p><p>&#25105;&#20204;&#35748;&#20026;&#65292;&#22312;&#31995;&#32479;&#35774;&#35745;&#26102;&#24212;&#35813;&#23545;&#21151;&#33021;&#36827;&#34892;&#25277;&#35937;&#65292;&#27599;&#20010;&#25277;&#35937;&#30340;&#21151;&#33021;&#20855;&#26377;&#30456;&#24212;&#30340;&#21517;&#31216;&#12290;er.permission&#25552;&#20379;&#20102;&#23545;&#21151;&#33021;&#26159;&#21542;&#20855;&#26377;&#26435;&#38480;&#30340;&#21028;&#26029;&#20837;&#21475;&#12290;</p><p>&#39318;&#20808;&#25105;&#20204;&#35201;&#36890;&#36807;init&#26041;&#27861;&#65292;&#20256;&#36755;&#19968;&#20010;Javascript Object&#65292;&#21021;&#22987;&#21270;&#24403;&#21069;&#25317;&#26377;&#30340;&#26435;&#38480;&#12290;&#36825;&#20010;Object&#21487;&#20197;&#20855;&#26377;&#23884;&#22871;&#32467;&#26500;&#12290;</p><pre class="programlisting">er.permission.init({
slot: {slot_list: 1},
user: {user_list: 1, user_add: 1, user_del: 1, user_edit: 1},
sys_info: 1
});</pre><p>&#36890;&#24120;&#65292;&#29992;&#20110;&#21021;&#22987;&#21270;&#30340;Object&#36890;&#36807;server&#31471;&#21160;&#24577;&#36755;&#20986;&#21040;&#39029;&#38754;&#20013;&#65292;&#25110;&#26469;&#33258;&#19968;&#20010;&#29420;&#31435;&#30340;xhr&#35831;&#27714;&#12290;&#32463;&#36807;&#19978;&#38754;&#30340;&#21021;&#22987;&#21270;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;isAllow&#26469;&#21028;&#26029;&#26159;&#21542;&#20855;&#26377;&#26435;&#38480;&#12290;&#19979;&#38754;&#26159;&#19968;&#20123;&#23545;&#19978;&#38754;init&#30340;isAllow&#32467;&#26524;&#65306;</p><pre class="programlisting">er.permission.isAllow('sys_info'); // true
er.permission.isAllow('slot_list'); // true
er.permission.isAllow('slot_edit'); // false</pre><p>ER&#26694;&#26550;&#20026;Location&#25552;&#20379;&#20102;&#19968;&#31181;&#26435;&#38480;&#26426;&#21046;&#65306;&#22522;&#20110;path&#25351;&#23450;&#19968;&#20010;&#26435;&#38480;&#65292;&#24403;&#21069;&#35775;&#38382;&#32773;&#19981;&#20855;&#26377;&#36825;&#20010;&#26435;&#38480;&#26102;&#65292;&#33258;&#21160;&#36339;&#36716;&#21040;&#20854;&#20182;Location&#12290;&#20351;&#29992;&#36825;&#20010;&#21151;&#33021;&#38656;&#35201;&#22312;Action&#37197;&#32622;&#26102;&#28155;&#21152;&#26435;&#38480;&#20449;&#24687;&#12290;&#34920;&#31034;&#26435;&#38480;&#20449;&#24687;&#30340;&#23646;&#24615;&#26377;&#20004;&#20010;&#65306;authority&#21644;noAuthLocation&#12290;authority&#25351;&#23450;&#26435;&#38480;&#21517;&#65292;noAuthLocation&#25351;&#23450;&#27809;&#26377;&#26435;&#38480;&#26102;&#30340;&#33258;&#21160;&#36339;&#36716;Location&#12290;</p><pre class="programlisting">{
path: '/member/add',
action: 'member.add',
authority: 'member_add',
noAuthLocation: '/member'
}</pre></div><div class="section" title="3.11. &#20351;&#29992;ESUI"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203577200"></a>3.11. &#20351;&#29992;ESUI</h2></div></div></div><div class="section" title="3.11.1. ESUI&#31616;&#20171;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203576400"></a>3.11.1. ESUI&#31616;&#20171;</h3></div></div></div><p>ESUI&#26159;&#19968;&#22871;&#31616;&#21333;&#30340;UI Library&#65292;&#25552;&#20379;&#19968;&#31995;&#21015;&#30340;&#25511;&#20214;&#65292;&#33021;&#28385;&#36275;&#22522;&#26412;&#39029;&#38754;&#20132;&#20114;&#21151;&#33021;&#12290;ESUI&#30340;api&#19982;&#40664;&#35748;&#35270;&#35273;&#30382;&#32932;&#36981;&#24490;BAIDU ECOMUI&#26631;&#20934;&#12290;&#19979;&#38754;&#26159;ESUI&#30340;&#32467;&#26500;&#22270;&#12290;</p><div><img src="esui_package.jpg"></div><p>ER&#26694;&#26550;&#36890;&#36807;extend&#30340;&#26041;&#24335;&#23454;&#29616;UI&#25511;&#20214;&#30340;&#28210;&#26579;&#25903;&#25345;&#12290;&#40664;&#35748;&#25903;&#25345;ESUI&#12290;</p></div><div class="section" title="3.11.2. &#27169;&#26495;&#20013;&#30340;&#23450;&#20041;&#35821;&#27861;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203574896"></a>3.11.2. &#27169;&#26495;&#20013;&#30340;&#23450;&#20041;&#35821;&#27861;</h3></div></div></div><p>ER&#26694;&#26550;&#33021;&#22815;&#28210;&#26579;&#39029;&#38754;&#20013;&#20855;&#26377;&#29305;&#27530;&#23646;&#24615;&#30340;dom&#20803;&#32032;&#65292;&#23558;&#20854;&#20316;&#20026;UI&#25511;&#20214;&#12290;&#19979;&#38754;&#26159;&#27169;&#26495;&#20013;&#22768;&#26126;UI&#25511;&#20214;&#30340;&#20363;&#23376;&#12290;</p><div class="example"><a name="idm105203572352"></a><p class="title"><b>Example 3.15. &#27169;&#26495;&#20013;&#22768;&#26126;UI&#32452;&#20214;</b></p><div class="example-contents"><pre class="programlisting">&lt;!-- target: list --&gt;
&lt;div ui="type:Table;id:myTable;datasource:*list;fields:*fields"&gt;&lt;/div&gt;
    </pre></div></div><br class="example-break"><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#20855;&#26377;ui&#23646;&#24615;&#30340;div&#23558;&#34987;&#20316;&#20026;&#25511;&#20214;&#36827;&#34892;&#28210;&#26579;&#12290;ui&#23646;&#24615;&#30340;&#20540;&#20197;&#31867;&#20284;css&#30340;&#26041;&#24335;&#23450;&#20041;&#12290;</p><pre class="programlisting"> key:value[;key:value] </pre><p>&#22312;&#23450;&#20041;ui&#25511;&#20214;&#30340;&#23646;&#24615;&#26102;&#65292;&#24517;&#39035;&#23450;&#20041;&#25511;&#20214;&#31867;&#22411;type&#19982;&#25511;&#20214;&#26631;&#35782;id&#12290;</p><p>&#20363;&#23376;&#20013;&#8220;datasource:*list&#8221;&#26159;&#29305;&#27530;&#30340;&#22768;&#26126;&#65292;&#24847;&#24605;&#26159;&#24341;&#29992;model&#20013;name&#20026;list&#30340;&#25968;&#25454;&#39033;&#12290;</p></div><div class="section" title="3.11.3. &#22312;view&#20013;&#23450;&#20041;&#25511;&#20214;&#23646;&#24615;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203569184"></a>3.11.3. &#22312;view&#20013;&#23450;&#20041;&#25511;&#20214;&#23646;&#24615;</h3></div></div></div><p>&#26377;&#26102;&#22312;&#27169;&#26495;&#20013;&#23450;&#20041;ui&#23646;&#24615;&#26102;&#65292;&#20540;&#21487;&#33021;&#20250;&#27604;&#36739;&#38271;&#12290;&#36825;&#26102;&#20505;&#21487;&#20197;&#22312;view&#20013;&#36890;&#36807;UI_PROP&#39033;&#23450;&#20041;&#25511;&#20214;&#30340;&#23646;&#24615;&#12290;&#23450;&#20041;&#30340;&#20540;&#23558;&#36890;&#36807;id&#26144;&#23556;&#21040;&#25511;&#20214;&#12290;&#36825;&#26102;&#20505;&#25105;&#20204;&#38656;&#35201;&#25163;&#24037;&#21019;&#24314;er.View&#23454;&#20363;&#12290;</p><div class="example"><a name="idm105203567744"></a><p class="title"><b>Example 3.16. &#22312;view&#20013;&#23450;&#20041;&#25511;&#20214;&#23646;&#24615;</b></p><div class="example-contents"><pre class="programlisting">
new er.View( {
    UI_PROP: {
        myTable: {
            datasource : '*list',
            fields     : '*fields'
        }
    }
} );
    </pre></div></div><br class="example-break"><div class="tip" title="Tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>&#24314;&#35758;&#22312;&#27169;&#26495;&#20013;&#23450;&#20041;&#25511;&#20214;&#30340;id&#21644;type&#65292;&#25511;&#20214;&#30340;&#20854;&#20182;&#23646;&#24615;&#36890;&#36807;view&#30340;UI_PROP&#39033;&#23450;&#20041;&#12290;</p></div></div><div class="section" title="3.11.4. &#32473;&#25511;&#20214;&#32465;&#23450;&#20107;&#20214;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203565744"></a>3.11.4. &#32473;&#25511;&#20214;&#32465;&#23450;&#20107;&#20214;</h3></div></div></div><p>&#36890;&#24120;&#25105;&#20204;&#38656;&#35201;&#32473;&#25511;&#20214;&#32465;&#23450;&#20107;&#20214;&#12290;&#27604;&#36739;&#21512;&#36866;&#30340;&#26041;&#27861;&#26159;&#22312;Action&#30340;onafterrender&#20013;&#32465;&#23450;&#20107;&#20214;&#12290;&#22240;&#22240;&#20026;&#22312;&#20351;&#29992;&#25511;&#20214;&#30340;&#27169;&#24335;&#19979;&#65292;repaint&#26102;&#19981;&#20250;&#37325;&#26032;&#21019;&#24314;&#25511;&#20214;&#65292;&#21482;&#21047;&#26032;&#25511;&#20214;&#35270;&#22270;&#65292;&#22312;onentercomplete&#32465;&#23450;&#20250;&#36896;&#25104;&#37325;&#22797;&#32465;&#23450;&#12290;</p><div class="example"><a name="idm105203564368"></a><p class="title"><b>Example 3.17. &#32473;&#25511;&#20214;&#32465;&#23450;&#20107;&#20214;</b></p><div class="example-contents"><pre class="programlisting">
new er.Action( {
    ......

    onafterrender: function () {
        esui.get( 'myPager' ).onchange = this.getPageChanger();
    },

    getPageChanger: function () {
        var me = this;

        return function ( page ) {
            me.model.set( 'page', page );
            me.refresh();
        };
    }
} );
    </pre></div></div><br class="example-break"><div class="tip" title="Tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>&#25511;&#20214;&#30340;&#20107;&#20214;&#22788;&#29702;&#20989;&#25968;&#26368;&#22909;&#19981;&#35201;&#25918;&#22312;onafterrender&#30340;function&#20869;&#65292;&#24212;&#25552;&#21462;&#20986;&#26469;&#65292;&#31867;&#20284;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#37027;&#26679;&#12290;</p></div></div><div class="section" title="3.11.5. Model&#21464;&#26356;&#30340;&#23454;&#26102;&#35270;&#22270;&#21047;&#26032;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203562064"></a>3.11.5. Model&#21464;&#26356;&#30340;&#23454;&#26102;&#35270;&#22270;&#21047;&#26032;</h3></div></div></div><p>&#22312;&#20351;&#29992;&#25511;&#20214;&#30340;&#27169;&#24335;&#19979;&#65292;Action&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;&#19968;&#20010;&#37197;&#32622;&#39033;&#65306;MODEL_SILENCE&#65292;&#24320;&#21551;&#25110;&#20851;&#38381;model&#21457;&#29983;&#21464;&#26356;&#26102;&#26159;&#21542;&#23454;&#26102;&#21047;&#26032;&#25511;&#20214;&#12290;&#35813;&#20540;&#40664;&#35748;&#20026;true&#12290;&#35774;&#32622;&#20026;false&#21017;model&#21464;&#26356;&#23558;&#23454;&#26102;&#21453;&#39304;&#12290;</p><div class="example"><a name="idm105203560816"></a><p class="title"><b>Example 3.18. Model&#21464;&#26356;&#30340;&#23454;&#26102;&#35270;&#22270;&#21047;&#26032;</b></p><div class="example-contents"><pre class="programlisting">
&lt;!-- html &#27169;&#26495;&#20869;&#23481; --&gt;
&lt;input type="text" ui="type:TextInput;id:myText;value:*value" /&gt;
&lt;div ui="type:Button;id:myButton"&gt;&lt;/div&gt;

// action&#20869;&#23481;
new er.Action( {
    MODEL_SILENCE: false,

    onafterrender: function () {
        esui.get( 'myButton' ).onclick = this.getBtnClickr();
    },

    getBtnClickr: function () {
        var me = this;

        return function () {
            // &#35774;&#32622;value&#65292;&#24341;&#29992;model&#20013;value&#39033;&#30340;&#25511;&#20214;"myText"&#35270;&#22270;&#23558;&#23454;&#26102;&#26356;&#26032;
            me.model.set( 'value', 'erik' );

            // &#36890;&#36807;silence&#21442;&#25968;&#35774;&#32622;value&#65292;"myText"&#35270;&#22270;&#19981;&#20250;&#23454;&#26102;&#26356;&#26032;
            me.model.set( 'value', 'erik2', {silence: true} );
        };
    }
} );
    </pre></div></div><br class="example-break"></div></div><div class="section" title="3.12. ER&#26694;&#26550;&#24037;&#20316;&#27969;&#31243;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203559664"></a>3.12. ER&#26694;&#26550;&#24037;&#20316;&#27969;&#31243;</h2></div></div></div><p>&#22312;&#26412;&#31456;&#33410;&#24320;&#22987;&#30340;&#26102;&#20505;&#65292;&#25105;&#20204;&#30475;&#21040;&#20102;ER&#26694;&#26550;&#31616;&#21333;&#30340;&#24037;&#20316;&#27969;&#31243;&#12290;&#19979;&#38754;&#26159;ER&#26694;&#26550;&#23436;&#25972;&#30340;&#24037;&#20316;&#27969;&#31243;&#12290;</p><div><img src="er_workflow.jpg"></div></div><div class="section" title="3.13. &#24320;&#21457;&#35268;&#33539;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203556784"></a>3.13. &#24320;&#21457;&#35268;&#33539;</h2></div></div></div><p>&#22312;&#20351;&#29992;ER&#26694;&#26550;&#36827;&#34892;&#24320;&#21457;&#20043;&#21069;&#65292;&#35831;&#35814;&#32454;&#38405;&#35835;&#24320;&#21457;&#35268;&#33539;&#12290;&#26412;&#35268;&#33539;&#26080;&#27861;&#20445;&#35777;&#24517;&#39035;&#36981;&#23432;&#65292;&#20294;&#36981;&#23432;&#24320;&#21457;&#35268;&#33539;&#20250;&#20943;&#23569;&#24320;&#21457;&#36807;&#31243;&#20013;&#36935;&#21040;&#30340;&#38382;&#39064;&#65292;&#35753;&#24320;&#21457;&#36807;&#31243;&#21464;&#24471;&#26356;&#26377;&#26465;&#29702;&#65292;&#31995;&#32479;&#26356;&#23481;&#26131;&#32500;&#25252;&#12290;</p><div class="section" title="3.13.1. &#20351;&#29992;&#29256;&#26412;&#31649;&#29702;&#24037;&#20855;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203555392"></a>3.13.1. &#20351;&#29992;&#29256;&#26412;&#31649;&#29702;&#24037;&#20855;</h3></div></div></div><p>&#26080;&#35770;&#26159;&#22242;&#38431;&#24320;&#21457;&#36824;&#26159;&#20010;&#20154;&#24320;&#21457;&#65292;&#37117;&#24212;&#35813;&#20351;&#29992;&#29256;&#26412;&#31649;&#29702;&#24037;&#20855;&#12290;&#25512;&#33616;svn &#25110; git&#12290;</p></div><div class="section" title="3.13.2. web&#26681;&#30446;&#24405;&#25991;&#20214;&#22841;&#32467;&#26500;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203554048"></a>3.13.2. web&#26681;&#30446;&#24405;&#25991;&#20214;&#22841;&#32467;&#26500;</h3></div></div></div><p>&#22312;web&#26681;&#30446;&#24405;&#19979;&#65292;&#24314;&#31435;&#20004;&#20010;&#25991;&#20214;&#22841;&#65306;"src"&#19982;"asset"&#65292;&#24182;&#23558;html&#32622;&#20110;&#35813;&#30446;&#24405;&#19979;&#12290;&#36825;&#26679;&#20570;&#30340;&#22909;&#22788;&#26159;&#65292;&#19978;&#32447;&#26102;&#21487;&#20197;&#30452;&#25509;&#21024;&#38500;&#19968;&#20010;src&#30446;&#24405;&#65292;&#23601;&#23558;&#25152;&#26377;&#28304;&#20195;&#30721;&#37117;&#21024;&#38500;&#12290;</p><pre class="programlisting">
webroot
    |-  asset
    |-  src
        index.html
    </pre></div><div class="section" title="3.13.3. &#21253;&#21010;&#20998;&#19982;&#21629;&#21517;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203552080"></a>3.13.3. &#21253;&#21010;&#20998;&#19982;&#21629;&#21517;</h3></div></div></div><p>&#38500;&#20102;&#39030;&#23618;&#21253;&#65292;&#19981;&#22312;&#20840;&#23616;&#29615;&#22659;&#20013;&#22768;&#26126;&#20219;&#20309;&#21464;&#37327;&#12290;&#24182;&#20026;&#39033;&#30446;&#36215;&#19968;&#20010;&#21517;&#23383;&#65292;&#20316;&#20026;&#19994;&#21153;&#30340;&#21253;&#21517;&#65292;&#22914;mblog&#12290;&#39030;&#23618;&#21253;&#19979;&#21487;&#20197;&#26377;&#19968;&#20123;Module&#65292;&#20316;&#20026;&#23376;&#21253;&#12290;</p><p>&#21253;&#21629;&#21517;&#37319;&#29992;&#39548;&#23792;&#21629;&#21517;&#27861;&#65292;&#20294;&#26368;&#22909;&#21482;&#30001;&#19968;&#20010;&#21333;&#35789;&#25110;&#20195;&#21495;&#32452;&#25104;&#12290;</p><pre class="programlisting">
mblog
mblog.category
mblog.blog
mblog.comment
    </pre></div><div class="section" title="3.13.4. src&#30446;&#24405;&#25991;&#20214;&#22841;&#32467;&#26500;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203549664"></a>3.13.4. src&#30446;&#24405;&#25991;&#20214;&#22841;&#32467;&#26500;</h3></div></div></div><p>src&#30446;&#24405;&#19979;&#20027;&#35201;&#26159;&#19977;&#31181;&#31867;&#22411;&#30340;&#36164;&#28304;&#65306;javascript&#12289;css&#12289;template&#12290;&#22312;ER&#26694;&#26550;&#20013;&#65292;template&#20027;&#35201;&#26159;html&#12290;</p><div class="section" title="3.13.4.1. Javascript source&#30340;&#31649;&#29702;"><div class="titlepage"><div><div><h4 class="title"><a name="idm105203548272"></a>3.13.4.1. Javascript source&#30340;&#31649;&#29702;</h4></div></div></div><p>Javascript&#30340;&#37327;&#26368;&#22810;&#65292;src&#19979;&#24212;&#25353;&#29031;Javascript&#26469;&#31649;&#29702;&#65292;&#24182;&#20005;&#26684;&#26681;&#25454;&#21253;&#32467;&#26500;&#23545;&#24212;&#21040;&#25991;&#20214;&#12290;&#22914;mblog&#30340;&#22768;&#26126;&#23545;&#24212;&#21040;src/mblog.js&#65292;mblog.blog.list&#30340;&#22768;&#26126;&#23545;&#24212;&#21040;src/mblog/blog/list.js&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#25991;&#20214;&#22841;&#32467;&#26500;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">
src
  |- mblog [dir]
        |- category [dir]
        |- blog     [dir]
        |- comment  [dir]
        |- category.js
        |- blog.js
        |- comment.js
  |- mblog.js
    </pre><p>&#21487;&#20197;&#30475;&#21040;&#65292;&#36825;&#26679;&#30340;&#30446;&#24405;&#32467;&#26500;&#26159;&#26377;&#20887;&#20313;&#30340;&#65292;src&#19979;&#30452;&#25509;&#26377;mblog&#30446;&#24405;&#21644;mblog.js&#25991;&#20214;&#12290;&#20294;&#26159;&#36825;&#26679;&#20570;&#30340;&#22909;&#22788;&#26377;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#26041;&#20415;&#23545;&#20381;&#36182;&#22768;&#26126;&#36827;&#34892;&#21160;&#24577;&#21152;&#36733;&#12290;</p></li><li class="listitem"><p>&#26041;&#20415;&#25171;&#21253;&#12290;</p></li></ol></div></div><div class="section" title="3.13.4.2. CSS source&#30340;&#31649;&#29702;"><div class="titlepage"><div><div><h4 class="title"><a name="idm105203543760"></a>3.13.4.2. CSS source&#30340;&#31649;&#29702;</h4></div></div></div><p>CSS&#26377;&#19968;&#20010;&#29305;&#24615;&#65306;&#20854;"url(path)"&#20013;&#30340;path&#30456;&#23545;&#30340;&#26159;&#35813;&#24403;&#21069;css&#25991;&#20214;&#30340;&#22320;&#22336;&#65292;&#32780;&#19981;&#26159;&#35775;&#38382;&#39029;&#38754;&#30340;&#22320;&#22336;&#12290;&#25152;&#20197;css&#36164;&#28304;&#24212;&#35813;&#20998;&#24320;&#31649;&#29702;&#12290;&#22914;&#26524;css&#25991;&#20214;&#36739;&#23569;&#65288;1-2&#20010;&#65289;&#65292;&#24212;&#30452;&#25509;&#32622;&#20110;src&#30446;&#24405;&#19979;&#65292;&#22914;&#26524;&#25991;&#20214;&#36739;&#22810;&#65292;&#21017;&#22312;src&#30446;&#24405;&#19979;&#26377;&#19968;&#20010;css&#30446;&#24405;&#12290;</p></div><div class="section" title="3.13.4.3. template&#30340;&#31649;&#29702;"><div class="titlepage"><div><div><h4 class="title"><a name="idm105203542192"></a>3.13.4.3. template&#30340;&#31649;&#29702;</h4></div></div></div><p>template&#36890;&#24120;&#26159;&#19982;&#19994;&#21153;&#30456;&#20851;&#30340;&#24067;&#23616;&#19982;&#20869;&#23481;&#65292;&#24212;&#25918;&#22312;&#30456;&#20851;&#19994;&#21153;&#36923;&#36753;&#30340;&#30446;&#24405;&#19979;&#65292;&#19982;&#30456;&#20851;&#19994;&#21153;&#30340;Javascript&#21516;&#30446;&#24405;&#12290;</p></div></div><div class="section" title="3.13.5. &#24320;&#21457;&#26102;&#30340;&#31649;&#29702;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203540704"></a>3.13.5. &#24320;&#21457;&#26102;&#30340;&#31649;&#29702;</h3></div></div></div><div class="section" title="3.13.5.1. &#24341;&#29992;Javascript&#19982;CSS"><div class="titlepage"><div><div><h4 class="title"><a name="idm105203539904"></a>3.13.5.1. &#24341;&#29992;Javascript&#19982;CSS</h4></div></div></div><p>&#20043;&#21069;&#25552;&#21040;&#22312;web&#26681;&#30446;&#24405;&#19979;&#26377;asset&#21644;src&#30446;&#24405;&#65292;&#20197;&#21450;&#30456;&#24212;&#30340;html&#25991;&#20214;&#12290;&#24320;&#21457;&#26102;html&#24212;&#24341;&#29992;asset&#30446;&#24405;&#19979;&#30340;Javascript&#12289;css&#12289;template&#25991;&#20214;&#65292;&#36825;&#26679;&#22312;&#25171;&#21253;&#36807;&#31243;&#20013;html&#21487;&#20197;&#19981;&#20570;&#20462;&#25913;&#12290;</p><pre class="programlisting">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        ....
        &lt;!-- &#22914;&#26524;&#22312;src&#30446;&#24405;&#20013;&#65292;css&#25991;&#20214;&#30452;&#25509;&#25918;&#22312;src&#30446;&#24405;&#19979;&#65292;&#21017;&#24212;&#24341;&#29992;asset/mblog.css --&gt;
        &lt;link href="asset/css/mblog.css" rel="stylesheet" type="text/css" /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        ....
        &lt;script src="asset/mblog.js" type="text/javascript"&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
    </pre></div><div class="section" title="3.13.5.2. &#24341;&#29992;Javascript&#19982;CSS"><div class="titlepage"><div><div><h4 class="title"><a name="idm105203537568"></a>3.13.5.2. &#24341;&#29992;Javascript&#19982;CSS</h4></div></div></div><p>&#22312;asset&#30446;&#24405;&#19979;&#30456;&#24212;&#30340;js&#19982;css&#25991;&#20214;&#20013;&#65292;&#20351;&#29992;document.write&#19982;@import&#24341;&#29992;src&#19979;&#30340;&#36164;&#28304;</p><pre class="programlisting">
// mblog.js
document.write( '&lt;script src="src/mblog.js" type="text/javascript"&gt;&lt;/script&gt;' );
document.write( '&lt;script src="src/mblog/category.js" type="text/javascript"&gt;&lt;/script&gt;' );
document.write( '&lt;script src="src/mblog/category/list.js" type="text/javascript"&gt;&lt;/script&gt;' );

/* mblog.css */
@import '../../src/css/mblog-category.css';
    </pre><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>&#22312;IE&#19979;&#65292;&#26368;&#22810;&#25903;&#25345;&#29992;@import&#24341;&#20837;32&#20010;&#22806;&#37096;css&#65292;&#24320;&#21457;&#26102;&#23613;&#37327;&#19981;&#35201;&#36229;&#36807;&#36825;&#20010;&#25968;&#12290;</p></div></div><div class="section" title="3.13.5.3. &#24341;&#29992;template"><div class="titlepage"><div><div><h4 class="title"><a name="idm105203534672"></a>3.13.5.3. &#24341;&#29992;template</h4></div></div></div><p>ER&#26694;&#26550;&#36890;&#36807;{Array}er.config.TEMPLATE_LIST&#39033;&#26469;&#37197;&#32622;&#27169;&#26495;&#21015;&#34920;&#24182;&#33258;&#21160;&#21152;&#36733;&#65292;&#32780;&#32447;&#19978;&#29615;&#22659;&#30340;&#27169;&#26495;&#36890;&#24120;&#34987;&#25171;&#21253;1-3&#20010;&#27169;&#26495;&#25991;&#20214;&#12290;&#20026;&#21306;&#21035;&#24320;&#21457;&#26102;&#19982;&#32447;&#19978;&#29615;&#22659;&#65292;&#24212;&#22312;src&#19979;&#20570;&#20004;&#20221;&#37197;&#32622;&#65306;__tpl__release__.js&#21644;__tpl__debug__.js&#12290;</p><p>&#22312;&#24320;&#21457;&#26102;&#20351;&#29992;document.write&#30340;&#26041;&#24335;&#24341;&#29992;&#20004;&#20010;&#25991;&#20214;&#65292;debug&#25991;&#20214;&#30340;&#37197;&#32622;&#20250;&#35206;&#30422;release&#25991;&#20214;&#30340;&#37197;&#32622;&#65292;&#20445;&#35777;&#24320;&#21457;&#26102;&#24341;&#29992;&#30340;&#26159;source&#12290;</p><p>&#22312;&#25171;&#21253;&#33050;&#26412;&#20013;&#36890;&#36807;__debug__&#29305;&#24449;&#36807;&#28388;&#34892;&#65292;&#20445;&#35777;&#32447;&#19978;&#24341;&#29992;&#30340;&#26159;release&#30340;&#37197;&#32622;&#12290;</p><pre class="programlisting">
// asset/mblog.js &#29255;&#27573;
document.write( '&lt;script src="src/__tpl__release__.js" type="text/javascript"&gt;&lt;/script&gt;' );
document.write( '&lt;script src="src/__tpl__debug__.js" type="text/javascript"&gt;&lt;/script&gt;' );

// src/__tpl__release__.js &#29255;&#27573;
er.config.TEMPLATE_LIST = [ 'asset/tpl.html' ];

// src/__tpl__debug__.js &#29255;&#27573;
er.config.TEMPLATE_LIST = [ 
    'src/mblog/blog/list.html',
    'src/mblog/comment/list.html',
    ......
];

    </pre></div><div class="section" title="3.13.5.4. &#22270;&#29255;&#36164;&#28304;&#30340;&#31649;&#29702;"><div class="titlepage"><div><div><h4 class="title"><a name="idm105203531200"></a>3.13.5.4. &#22270;&#29255;&#36164;&#28304;&#30340;&#31649;&#29702;</h4></div></div></div><p>&#22270;&#29255;&#36164;&#28304;&#24212;&#30452;&#25509;&#32622;&#20110;asset&#30446;&#24405;&#19979;&#65292;&#39029;&#38754;&#36890;&#36807;img&#26631;&#31614;&#24341;&#20837;&#30340;&#22270;&#29255;&#25918;&#22312;"asset/img"&#30446;&#24405;&#19979;&#65292;css&#29992;&#21040;&#30340;&#22270;&#29255;&#24212;&#32622;&#20110;asset/css/img&#30446;&#24405;&#19979;&#12290;&#22312;css source&#25991;&#20214;&#20013;&#20808;&#36890;&#36807;&#30456;&#23545;&#36335;&#24452;&#24341;&#29992;&#21040;&#26681;&#30446;&#24405;&#65292;&#20877;&#26597;&#25214;&#22270;&#29255;&#25991;&#20214;&#30340;&#36335;&#24452;&#12290;&#35813;&#26041;&#27861;&#36991;&#20813;&#22312;src&#21644;asset&#30446;&#24405;&#19979;&#23384;&#22312;&#20004;&#20221;&#22270;&#29255;&#25991;&#20214;&#65292;&#22270;&#29255;&#32534;&#36753;&#26102;&#21487;&#33021;&#20135;&#29983;&#20004;&#36793;&#19981;&#19968;&#33268;&#30340;&#38382;&#39064;&#12290;</p><pre class="programlisting">background:url(../../asset/css/img/sprites.png);</pre></div></div><div class="section" title="3.13.6. &#25171;&#21253;&#19982;&#21387;&#32553;"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203528944"></a>3.13.6. &#25171;&#21253;&#19982;&#21387;&#32553;</h3></div></div></div><p>&#25105;&#20204;&#22312;&#25552;&#20132;&#27979;&#35797;&#21069;&#65292;&#38656;&#35201;&#23545;Javascript&#12289;CSS&#12289;template&#36164;&#28304;&#36827;&#34892;&#25171;&#21253;&#19982;&#21387;&#32553;&#22788;&#29702;&#12290;&#36890;&#24120;&#25105;&#20204;&#29992;shell&#23436;&#25104;&#36825;&#20010;&#20219;&#21153;&#65292;&#22240;&#20026;&#23427;&#38750;&#24120;&#26041;&#20415;&#12290;&#19979;&#38754;&#26159;&#25171;&#21253;&#24182;&#21387;&#32553;Javascript&#30340;&#19968;&#20010;&#20363;&#23376;&#65292;CSS&#20063;&#21487;&#20197;&#37319;&#29992;&#31867;&#20284;&#26041;&#24335;&#22788;&#29702;&#12290;</p><pre class="programlisting">
#! /bin/sh

currPath=$(dirname "$0")
yuipath="" #yuicompress&#36335;&#24452;
cd "$currPath"

cat asset/mblog.js | 
    awk -F'"' '/src="[^"]+.js"/{print $2}' |
            xargs cat &gt; "asset/mblog-all.js"

java -jar ${yuipath} --charset utf-8 -o asset/mblog-c.js asset/mblog-all.js

rm -f asset/mblog.js
rm -f asset/mblog-all.js
mv asset/mblog-c.js asset/mblog.js
    </pre></div></div></div><div class="chapter" title="Chapter 4. &#36827;&#38454;&#31687;&#65306;&#25193;&#23637;ER&#26694;&#26550;"><div class="titlepage"><div><div><h2 class="title"><a name="idm105203748688"></a>Chapter 4. &#36827;&#38454;&#31687;&#65306;&#25193;&#23637;ER&#26694;&#26550;</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idm105203526192">4.1. Action&#25193;&#23637;</a></span></dt><dd><dl><dt><span class="section"><a href="#idm105203525008">4.1.1. &#36890;&#36807;extend&#25193;&#23637;Action</a></span></dt><dt><span class="section"><a href="#idm105203522560">4.1.2. &#36890;&#36807;&#32487;&#25215;&#25193;&#23637;Action</a></span></dt></dl></dd><dt><span class="section"><a href="#idm105203520496">4.2. View&#25193;&#23637;</a></span></dt><dt><span class="section"><a href="#idm105203518752">4.3. &#33258;&#23450;&#20041;route&#35268;&#21017;</a></span></dt></dl></div><div class="section" title="4.1. Action&#25193;&#23637;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203526192"></a>4.1. Action&#25193;&#23637;</h2></div></div></div><p>ER&#26694;&#26550;&#25903;&#25345;&#20197;&#20004;&#31181;&#26041;&#24335;&#25193;&#23637;Action&#65306;&#36890;&#36807;extend&#21644;&#32487;&#25215;&#12290;</p><div class="section" title="4.1.1. &#36890;&#36807;extend&#25193;&#23637;Action"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203525008"></a>4.1.1. &#36890;&#36807;extend&#25193;&#23637;Action</h3></div></div></div><pre class="programlisting"> er.Action.extend( ext, opt_name ); </pre><p>&#36890;&#36807;extend&#25193;&#23637;Action&#65292;&#40664;&#35748;&#24773;&#20917;&#19979;&#25193;&#23637;&#20250;&#24433;&#21709;&#21040;&#25152;&#26377;&#30340;Action&#12290;opt_name&#26159;&#21487;&#36873;&#30340;&#21035;&#21517;&#12290;&#24403;&#25351;&#23450;&#21035;&#21517;&#26102;&#65292;&#25193;&#23637;&#19981;&#20250;&#24433;&#21709;&#25152;&#26377;&#30340;Action&#65292;&#21482;&#20250;&#24433;&#21709;&#23454;&#20363;&#21270;&#26102;&#25351;&#23450;&#20102;&#21035;&#21517;&#30340;Action&#65292;&#20363;&#23376;&#22914;&#19979;&#65306;</p><pre class="programlisting"> book.list = new er.Action( {...}, opt_name ); </pre></div><div class="section" title="4.1.2. &#36890;&#36807;&#32487;&#25215;&#25193;&#23637;Action"><div class="titlepage"><div><div><h3 class="title"><a name="idm105203522560"></a>4.1.2. &#36890;&#36807;&#32487;&#25215;&#25193;&#23637;Action</h3></div></div></div><p>ER&#26694;&#26550;&#40664;&#35748;&#20381;&#36182;Tangram JSLibrary&#65292;&#25512;&#33616;&#20351;&#29992;T.inherits&#26500;&#24314;&#32487;&#25215;&#20851;&#31995;&#12290;&#19979;&#38754;&#26159;&#31616;&#21333;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">function ListAction() {}

ListAction.prototype = {
    // &#20320;&#30340;&#25193;&#23637;&#26041;&#27861;
};
T.inherits( ListAction, er.Action );</pre></div></div><div class="section" title="4.2. View&#25193;&#23637;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203520496"></a>4.2. View&#25193;&#23637;</h2></div></div></div><p>ER&#26694;&#26550;&#20165;&#25903;&#25345;&#36890;&#36807;extend&#26041;&#24335;&#25193;&#23637;View&#65292;&#24182;&#19988;&#25193;&#23637;&#20250;&#24433;&#21709;&#21040;&#25152;&#26377;&#30340;View&#12290;ER&#26694;&#26550;&#23545;UI&#25511;&#20214;&#28210;&#26579;&#30340;&#25903;&#25345;&#23601;&#26159;&#36890;&#36807;View&#30340;extend&#23454;&#29616;&#30340;&#12290;&#30456;&#20851;&#20889;&#27861;&#35831;&#21442;&#32771;src/er/extend/ui.js&#12290;</p><pre class="programlisting"> er.View.extend( ext ); </pre></div><div class="section" title="4.3. &#33258;&#23450;&#20041;route&#35268;&#21017;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm105203518752"></a>4.3. &#33258;&#23450;&#20041;route&#35268;&#21017;</h2></div></div></div><p>ER&#26694;&#26550;&#20801;&#35768;&#36890;&#36807;er.router.add&#26041;&#27861;&#65292;&#22686;&#21152;&#33258;&#24049;&#30340;route&#35268;&#21017;&#65292;&#23558;location&#36716;&#21457;&#32473;&#30456;&#24212;&#30340;function&#36827;&#34892;&#22788;&#29702;&#12290;</p><p>&#36890;&#24120;&#65292;router&#23558;&#36716;&#21457;&#26435;&#20132;&#32473;Controller&#65292;Controller&#20877;&#36716;&#21457;&#32473;Action&#65292;Action&#36127;&#36131;&#22788;&#29702;&#20855;&#20307;&#35831;&#27714;&#20197;&#21450;Model&#12289;View&#30340;&#25972;&#21512;&#12290;&#22686;&#21152;&#33258;&#24049;&#30340;route&#35268;&#21017;&#21644;function&#21487;&#20197;&#25243;&#24323;ER&#26694;&#26550;&#25552;&#20379;&#30340;MVC&#27169;&#24335;&#65292;&#33258;&#23450;&#20041;&#33258;&#24049;&#30340;&#35831;&#27714;&#22788;&#29702;&#27169;&#24335;&#12290;</p><p>er.router.add&#26041;&#27861;&#25509;&#25910;&#20004;&#20010;&#21442;&#25968;&#12290;&#31532;&#19968;&#20010;&#26159;RegExp&#31867;&#22411;&#30340;&#21442;&#25968;&#65292;&#21305;&#37197;&#19978;&#30340;location&#23558;&#34987;&#36716;&#21457;&#32473;&#31532;&#20108;&#20010;&#21442;&#25968;&#22788;&#29702;&#12290;&#31532;&#20108;&#20010;&#21442;&#25968;&#26159;&#19968;&#20010;Function&#65292;Function&#30340;&#21442;&#25968;&#26159;&#31532;&#19968;&#20010;RegExp&#21305;&#37197;&#21040;string&#30340;&#25384;&#20010;&#20540;&#12290;</p><div class="example"><a name="idm105203516096"></a><p class="title"><b>Example 4.1. &#33258;&#23450;&#20041;route&#35268;&#21017;</b></p><div class="example-contents"><pre class="programlisting"> er.router.add( /^:([0-9]+):([0-9]+)$/, function ( loc, one, two ) {
                document.body.innerHTML = parseInt( one, 10 ) + parseInt( two, 10 );
            }); </pre></div></div><br class="example-break"></div></div></div></body></html>
